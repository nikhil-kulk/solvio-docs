<!DOCTYPE html>

<html lang="en"><head><meta content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui" name="viewport"/><meta charset="utf-8"/><title>Search Through Your Codebase - Solvio</title>
<link href="../../../favicon/favicon.ico" rel="icon"/><link href="https://solvio.tech/favicon/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/><link href="../../../favicon/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/><link href="../../../favicon/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/><link href="../../../favicon/site.webmanifest" rel="manifest"/><link color="#5bbad5" href="https://solvio.tech/favicon/safari-pinned-tab.svg" rel="mask-icon"/><meta content="#2b5797" name="msapplication-TileColor"/><meta content="/favicon/browserconfig.xml" name="msapplication-config"/><meta content="#ffffff" name="theme-color"/><meta content="solvio" name="partition"/><link href="../../../css/search/search.min.09596ee2b3c94d0ac82a1c33199cabdb3e0210b1ee46aaf1515200e9e484d05dd9e27cc1e861c58cc2e582af162f63b8e180ff2a12f7a6592b7aeaa0a7125130.css" rel="stylesheet"/><link href="../../../css/documentation.min.e6f67f5814d6056e5fc0a24dbfe9ef87a89b7a1dbbf6879b5c2a9e9f4085856b9ef4e76f1ff104a0df4f37f4ee8b5df86b04162b08534ee92b75bcb82a6c64bb.css" rel="stylesheet"/><meta content="Hugo 0.141.0" name="generator"/><meta content="Solvio is an Open-Source Vector Database and Vector Search Engine written in Rust. It provides fast and scalable vector similarity search service with convenient API." name="description"/><meta content="vector search engine,neural network,matching,SaaS,approximate nearest neighbor search,image search,recommender system,vectors,knn algorithm,hnsw,vector search,embeddings,similarity,simaes networks,BERT,transformer,word2vec,fasttext,solvio" name="keywords"/><script type="application/ld+json">{"@context":"https://schema.org","@graph":[{"@id":"https://solvio.tech/documentation/advanced-tutorials/code-search/#article","@type":"Article","abstract":"Navigate Your Codebase with Semantic Search and Solvio Time: 45 min Level: Intermediate You too can enrich your applications with Solvio semantic search In this tutorial we describe how you can use Solvio to navigate a codebase to help you find relevant code snippets As an example we will use the Solvio source code itself which is mostly written in RustThis tutorial might not work on code bases that are not disciplined or structured For good code search you may need to refactor the project first The approach We want to search codebases using natural semantic queries and searching for code based on similar logic You can set up these tasks with embeddings:","author":{"@type":"Organization","name":"Solvio","url":"https://solvio.tech/"},"dateModified":"0001-01-01 00:00:00 +0000 UTC","datePublished":"0001-01-01 00:00:00 +0000 UTC","description":"","headline":"Search Through Your Codebase","image":[""],"name":"Search Through Your Codebase","url":"https://solvio.tech/documentation/advanced-tutorials/code-search/","wordCount":"1883"},{"@id":"https://solvio.tech/documentation/advanced-tutorials/code-search/#organization","@type":"Organization","address":{"@type":"PostalAddress","addressCountry":"DE","addressLocality":"Berlin","addressRegion":"Berlin","postalCode":"10115","streetAddress":"Chausseestraße 86"},"contactPoint":{"@type":"ContactPoint","contactType":"customer support","email":"info@solvio.com","telephone":"+49 3040797694"},"description":"Solvio is an Open-Source Vector Database and Vector Search Engine written in Rust. It provides fast and scalable vector similarity search service with convenient API.","email":"info@solvio.com","founders":[{"@type":"Person","name":"map[email:info@solvio.tech name:Andrey Vasnetsov]"},{"@type":"Person","name":"Andre Zayarni"}],"foundingDate":"2021","keywords":["vector search engine","neural network","matching","SaaS","approximate nearest neighbor search","image search","recommender system","vectors","knn algorithm","hnsw","vector search","embeddings","similarity","simaes networks","BERT","transformer","word2vec","fasttext","Solvio"],"legalName":"Solvio Solutions GmbH","location":"Berlin, Germany","logo":"https://solvio.tech/images/logo_with_text.png","name":"Solvio","sameAs":["https://github.com/solvio/solvio","https://solvio.to/discord","https://www.youtube.com/channel/UC6ftm8PwH1RU_LM1jwG0LQA","https://www.linkedin.com/company/solvio/","https://twitter.com/solvio_engine"],"url":"https://solvio.tech"}]}</script><meta content="https://solvio.tech/documentation/advanced-tutorials/code-search/" property="og:url"/><meta content="website" property="og:type"/><meta content="Search Through Your Codebase - Solvio" property="og:title"/><meta content="summary_large_image" name="twitter:card"/><meta content="solvio" name="twitter:domain"/><meta content="https://solvio.tech/documentation/advanced-tutorials/code-search/" name="twitter:url"/><meta content="Search Through Your Codebase - Solvio" name="twitter:title"/><meta content="Solvio is an Open-Source Vector Database and Vector Search Engine written in Rust. It provides fast and scalable vector similarity search service with convenient API." property="og:description"/><meta content="Solvio is an Open-Source Vector Database and Vector Search Engine written in Rust. It provides fast and scalable vector similarity search service with convenient API." name="twitter:description"/><meta content="https://solvio.tech/images/previews/social-preview-E.png" name="image" property="og:image"/><meta content="https://solvio.tech/images/previews/social-preview-E.png" name="image" property="og:image:secure_url"/><meta content="image/jpeg" property="og:image:type"/><meta content="1200" property="og:image:width"/><meta content="630" property="og:image:height"/><meta content="https://solvio.tech/images/previews/social-preview-E.png" name="twitter:image:src"/><link href="index.html" rel="canonical"/><script src="https://js-eu1.hsforms.net/forms/embed/v2.js" type="text/javascript"></script><script src="../../../js/documentation.min.594fc9226f6fb87b8c3b0cafb9d5c0b0bcd95f47d292b929aab04315e0506706b2f376dc4fae9961dc3082138cb19d45b2a3370ee8e881bbf4b8c91dcb735c32.js"></script></head><body><main><header class="docs-header"><div class="main-menu z-5"><a href="https://solvio.tech/"><div class="logo"><img alt="logo" class="logo__img" src="../../../img/solvio-logo.png"/></div></a><div class="d-flex d-xl-none justify-content-end align-items-center gap-4"><div class="d-block d-xl-none"><button class="theme-switch" role="button"></button></div><button class="main-menu__trigger" type="button"><svg fill="none" height="24" viewbox="0 0 24 24" width="24"><path d="M1 12H23" stroke="#e1e5f0" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path><path d="M1 5H23" stroke="#e1e5f0" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path><path d="M1 19H23" stroke="#e1e5f0" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></button></div><ul class="main-menu__links"><li class="main-menu__item"><a class="menu-linkactive" href="../../index.html">Solvio</a></li><li class="main-menu__item"><a class="menu-link" href="../../cloud-intro/index.html">Cloud</a></li><li class="main-menu__item"><a class="menu-link" href="../../build/index.html">Build</a></li><li class="main-menu__item"></li><li class="main-menu__item"></li></ul><div class="main-menu__buttons"><div class="main-menu__buttons-input"><button class="qdr-search-input-btn q-input input_md input_light-bg" data-target="#searchModal" name="search" type="button">
Search</button></div><button class="theme-switch" role="button"></button>
</div></div><div class="menu-mobile"><div class="menu-mobile__header"><div class="logo"><img alt="logo" class="logo__img" src="../../../img/solvio-logo.png"/></div><div class="d-flex d-xl-none justify-content-end align-items-center gap-4"><div class="d-block d-xl-none"><button class="theme-switch" role="button"></button></div><button class="menu-mobile__close" type="button"><svg fill="none" height="24" viewbox="0 0 24 24" width="24"><g id="Close"><path clip-rule="evenodd" d="M19.778 5.63606C20.1685 5.24554 20.1685 4.61237 19.778 4.22185 19.3874 3.83132 18.7543 3.83132 18.3637 4.22185L11.9998 10.5858 5.63586 4.22185c-.39052-.39053-1.02369-.39053-1.41421.0C3.83112 4.61237 3.83112 5.24554 4.22165 5.63606L10.5856 12l-6.364 6.364C3.83108 18.7545 3.83108 19.3877 4.2216 19.7782 4.61213 20.1687 5.24529 20.1687 5.63582 19.7782l6.36398-6.364 6.364 6.364C18.7543 20.1687 19.3875 20.1687 19.778 19.7782 20.1685 19.3877 20.1685 18.7545 19.778 18.364L13.414 12l6.364-6.36394z" fill="#e1e5f0" fill-rule="evenodd" id="Vector"></path></g></svg></button></div></div><div class="main-menu__buttons-input"><button class="qdr-search-input-btn q-input input_md input_light-bg" data-target="#searchModal" name="search" type="button">
Search</button></div><ul class="menu-mobile__items"><li class="menu-mobile__item" data-path="menu-0"><div class="menu-mobile__item-content"><a class="active" href="../../index.html"><svg fill="#e1e5f0" height="16" viewbox="0 0 16 16" width="16"><g id="Menu/Documentation"><path clip-rule="evenodd" d="M4.25 1c-1.10092.0-2.12247.23681-2.88689.64443C.620129 2.04063.0 2.67297.0 3.5v11c0 .2761.223858.5.5.5s.5-.2239.5-.5c0-.278.21937-.6456.83364-.9732C2.42647 13.2107 3.27992 13 4.25 13 5.22008 13 6.07353 13.2107 6.66636 13.5268c.61427.3276.83364.6952.83364.9732.0.2761.22386.5.5.5s.5-.2239.5-.5c0-.278.21937-.6456.833640000000001-.9732C9.92647 13.2107 10.7799 13 11.75 13S13.5735 13.2107 14.1664 13.5268C14.7806 13.8544 15 14.222 15 14.5c0 .2761.2239.5.5.5s.5-.2239.5-.5V3.5C16 2.67297 15.3799 2.04063 14.6369 1.64443 13.8725 1.23681 12.8509 1 11.75 1s-2.12247.23681-2.88689.64443C8.53799 1.8178 8.2364 2.03638 8 2.29671c-.2364-.26033-.53799-.47891-.86311-.65228C6.37247 1.23681 5.35092 1 4.25 1zM1.36311 12.6444C1.23778 12.7113 1.11595 12.7848 1 12.8649V3.5c0-.27797.21937-.64563.83364-.97318C2.42647 2.21069 3.27992 2 4.25 2c.97008.0 1.82353.21069 2.41636.52682C7.28063 2.85437 7.5 3.22203 7.5 3.5v9.3649C7.38405 12.7848 7.26222 12.7113 7.13689 12.6444 6.37247 12.2368 5.35092 12 4.25 12 3.14908 12 2.12753 12.2368 1.36311 12.6444zM8.5 12.8649C8.61595 12.7848 8.73778 12.7113 8.86311 12.6444 9.62753 12.2368 10.6491 12 11.75 12S13.8725 12.2368 14.6369 12.6444C14.7622 12.7113 14.8841 12.7848 15 12.8649V3.5C15 3.22203 14.7806 2.85437 14.1664 2.52682 13.5735 2.21069 12.7201 2 11.75 2s-1.82353.21069-2.41636.52682C8.71937 2.85437 8.5 3.22203 8.5 3.5v9.3649z" fill-rule="evenodd" id="Vector"></path></g></svg>
Solvio</a></div></li><li class="menu-mobile__item" data-path="menu-1"><div class="menu-mobile__item-content"><a href="../../cloud-intro/index.html"><svg fill="#e1e5f0" height="16" viewbox="0 0 16 16" width="16"><g id="Menu/Cloud"><path clip-rule="evenodd" d="M7.5 2C4.57416 2 2.18128 4.28566 2.00983 7.16851.8403 7.57763.0 8.68965.0 10c0 1.6571 1.34286 3 3 3H13c1.6571.0 3-1.3429 3-3 0-1.65714-1.3429-3-3-3L12.9776 7.00009C12.7249 4.19714 10.3686 2 7.5 2zM3.00107 7.48137 3.00008 7.47308C3.01457 5.0006 5.02412 3 7.5 3c2.47599.0 4.4856 2.00079 4.4999 4.47342L11.9987 7.4836C11.9969 7.50027 11.995 7.52348 11.995 7.551 11.995 7.701 12.0623 7.84308 12.1785 7.93804 12.2946 8.03301 12.4472 8.07082 12.5942 8.04106 12.726 8.01438 12.8617 8 13 8c1.1049.0 2 .89514 2 2C15 11.1049 14.1049 12 13 12H3C1.89514 12 1 11.1049 1 10 1 9.03225 1.68901 8.22422 2.60364 8.04017 2.83708 7.9932 3.005 7.78812 3.005 7.55 3.005 7.52154 3.00291 7.49773 3.00107 7.48137z" fill-rule="evenodd" id="Vector"></path></g></svg>
Cloud</a></div></li><li class="menu-mobile__item" data-path="menu-2"><div class="menu-mobile__item-content"><a href="../../build/index.html"><svg fill="#e1e5f0" height="16" viewbox="0 0 16 16" width="16"><g id="Menu/Blog"><path clip-rule="evenodd" d="M0 1.5C0 1.22386.223858 1 .5 1h5c.27614.0.5.22386.5.5v5c0 .27614-.22386.5-.5.5H.5C.223858 7 0 6.77614.0 6.5v-5zM1 2V6H5V2H1zm7 .5c0-.27614.22386-.5.5-.5h7c.2761.0.5.22386.5.5s-.2239.5-.5.5h-7C8.22386 3 8 2.77614 8 2.5zM8.5 6c-.27614.0-.5.22386-.5.5s.22386.5.5.5h7c.2761.0.5-.22386.5-.5s-.2239-.5-.5-.5h-7zM0 10.5c0-.2761.223858-.5.5-.5h15c.2761.0.5.2239.5.5s-.2239.5-.5.5H.5c-.276142.0-.5-.2239-.5-.5zM.5 14c-.276142.0-.5.2239-.5.5s.223858.5.5.5h15c.2761.0.5-.2239.5-.5s-.2239-.5-.5-.5H.5z" fill-rule="evenodd" id="Union"></path></g></svg>
Build</a></div></li><li class="menu-mobile__item" data-path="menu-3"><div class="menu-mobile__item-content"></div></li><li class="menu-mobile__item" data-path="menu-4"><div class="menu-mobile__item-content"></div></li></ul><div class="docs-menu"><div class="docs-menu__content" id="sidebar"><nav class="docs-menu__links"><h3 class="docs-menu__links-title">Getting Started</h3><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../overview/index.html">What is Solvio?</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../overview/vector-search/index.html">Understanding Vector Search in Solvio</a></li></ul></nav></details><div class="docs-menu__links-group"><div class="docs-menu__links-group-heading"><a href="../../quickstart/index.html">Local Quickstart</a></div></div><div class="docs-menu__links-group"><div class="docs-menu__links-group-heading"><a href="../../interfaces/index.html">API &amp; SDKs</a></div></div><div class="docs-menu__links-group"><div class="docs-menu__links-group-heading"><a href="../../web-ui/index.html">Solvio Web UI</a></div></div><h3 class="docs-menu__links-title">User Manual</h3><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../concepts/index.html">Concepts</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../concepts/collections/index.html">Collections</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/points/index.html">Points</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/vectors/index.html">Vectors</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/payload/index.html">Payload</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/search/index.html">Search</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/explore/index.html">Explore</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/hybrid-queries/index.html">Hybrid Queries</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/filtering/index.html">Filtering</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/optimizer/index.html">Optimizer</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/storage/index.html">Storage</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/indexing/index.html">Indexing</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/snapshots/index.html">Snapshots</a></li></ul></nav></details><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../guides/installation/index.html">Guides</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../guides/installation/index.html">Installation</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/administration/index.html">Administration</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/running-with-gpu/index.html">Running with GPU</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/capacity-planning/index.html">Capacity Planning</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/optimize/index.html">Optimize Performance</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/multiple-partitions/index.html">Multitenancy</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/distributed_deployment/index.html">Distributed Deployment</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/quantization/index.html">Quantization</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/monitoring/index.html">Monitoring &amp; Telemetry</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/configuration/index.html">Configuration</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/security/index.html">Security</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/usage-statistics/index.html">Usage Statistics</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/common-errors/index.html">Troubleshooting</a></li></ul></nav></details><h3 class="docs-menu__links-title">Ecosystem</h3><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../fastembed/index.html">FastEmbed</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../fastembed/fastembed-quickstart/index.html">Quickstart</a></li><li class="docs-menu__links-submenu-item"><a href="../../fastembed/fastembed-semantic-search/index.html">FastEmbed &amp; Solvio</a></li><li class="docs-menu__links-submenu-item"><a href="../../fastembed/fastembed-splade/index.html">Working with SPLADE</a></li><li class="docs-menu__links-submenu-item"><a href="../../fastembed/fastembed-colbert/index.html">Working with ColBERT</a></li><li class="docs-menu__links-submenu-item"><a href="../../fastembed/fastembed-rerankers/index.html">Reranking with FastEmbed</a></li></ul></nav></details><h3 class="docs-menu__links-title">Tutorials</h3><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../beginner-tutorials/index.html">Vector Search Basics</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../beginner-tutorials/search-beginners/index.html">Semantic Search 101</a></li><li class="docs-menu__links-submenu-item"><a href="../../beginner-tutorials/neural-search/index.html">Build a Neural Search Service</a></li><li class="docs-menu__links-submenu-item"><a href="../../beginner-tutorials/hybrid-search-fastembed/index.html">Setup Hybrid Search with FastEmbed</a></li><li class="docs-menu__links-submenu-item"><a href="../../beginner-tutorials/retrieval-quality/index.html">Measure Search Quality</a></li></ul></nav></details><details class="docs-menu__links-group link-group active" open=""><summary class="docs-menu__links-group-heading"><a href="../index.html">Advanced Retrieval</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../reranking-hybrid-search/index.html">Reranking in Hybrid Search</a></li><li class="docs-menu__links-submenu-item active"><a href="index.html">Search Through Your Codebase</a></li><li class="docs-menu__links-submenu-item"><a href="../collaborative-filtering/index.html">Build a Recommendation System with Collaborative Filtering</a></li><li class="docs-menu__links-submenu-item"><a href="../pdf-retrieval-at-scale/index.html">Scaling PDF Retrieval with Solvio</a></li></ul></nav></details><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../database-tutorials/index.html">Using the Database</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../database-tutorials/bulk-upload/index.html">Bulk Upload Vectors</a></li><li class="docs-menu__links-submenu-item"><a href="../../database-tutorials/create-snapshot/index.html">Create &amp; Restore Snapshots</a></li><li class="docs-menu__links-submenu-item"><a href="../../database-tutorials/large-scale-search/index.html">Large Scale Search</a></li><li class="docs-menu__links-submenu-item"><a href="../../database-tutorials/huggingface-datasets/index.html">Load a HuggingFace Dataset</a></li><li class="docs-menu__links-submenu-item"><a href="../../database-tutorials/async-api/index.html">Build With Async API</a></li></ul></nav></details><h3 class="docs-menu__links-title">Support</h3><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../faq/solvio-fundamentals/index.html">FAQ</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../faq/solvio-fundamentals/index.html">Solvio Fundamentals</a></li><li class="docs-menu__links-submenu-item"><a href="../../faq/database-optimization/index.html">Database Optimization</a></li></ul></nav></details></nav></div></div></div></header><section class="docs documentation"><div class="documentation__container"><div class="d-flex flex-column flex-xl-row"><div class="docs-menu"><div class="docs-menu__content" id="sidebar"><nav class="docs-menu__links"><h3 class="docs-menu__links-title">Getting Started</h3><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../overview/index.html">What is Solvio?</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../overview/vector-search/index.html">Understanding Vector Search in Solvio</a></li></ul></nav></details><div class="docs-menu__links-group"><div class="docs-menu__links-group-heading"><a href="../../quickstart/index.html">Local Quickstart</a></div></div><div class="docs-menu__links-group"><div class="docs-menu__links-group-heading"><a href="../../interfaces/index.html">API &amp; SDKs</a></div></div><div class="docs-menu__links-group"><div class="docs-menu__links-group-heading"><a href="../../web-ui/index.html">Solvio Web UI</a></div></div><h3 class="docs-menu__links-title">User Manual</h3><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../concepts/index.html">Concepts</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../concepts/collections/index.html">Collections</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/points/index.html">Points</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/vectors/index.html">Vectors</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/payload/index.html">Payload</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/search/index.html">Search</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/explore/index.html">Explore</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/hybrid-queries/index.html">Hybrid Queries</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/filtering/index.html">Filtering</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/optimizer/index.html">Optimizer</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/storage/index.html">Storage</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/indexing/index.html">Indexing</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/snapshots/index.html">Snapshots</a></li></ul></nav></details><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../guides/installation/index.html">Guides</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../guides/installation/index.html">Installation</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/administration/index.html">Administration</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/running-with-gpu/index.html">Running with GPU</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/capacity-planning/index.html">Capacity Planning</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/optimize/index.html">Optimize Performance</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/multiple-partitions/index.html">Multitenancy</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/distributed_deployment/index.html">Distributed Deployment</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/quantization/index.html">Quantization</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/monitoring/index.html">Monitoring &amp; Telemetry</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/configuration/index.html">Configuration</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/security/index.html">Security</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/usage-statistics/index.html">Usage Statistics</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/common-errors/index.html">Troubleshooting</a></li></ul></nav></details><h3 class="docs-menu__links-title">Ecosystem</h3><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../fastembed/index.html">FastEmbed</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../fastembed/fastembed-quickstart/index.html">Quickstart</a></li><li class="docs-menu__links-submenu-item"><a href="../../fastembed/fastembed-semantic-search/index.html">FastEmbed &amp; Solvio</a></li><li class="docs-menu__links-submenu-item"><a href="../../fastembed/fastembed-splade/index.html">Working with SPLADE</a></li><li class="docs-menu__links-submenu-item"><a href="../../fastembed/fastembed-colbert/index.html">Working with ColBERT</a></li><li class="docs-menu__links-submenu-item"><a href="../../fastembed/fastembed-rerankers/index.html">Reranking with FastEmbed</a></li></ul></nav></details><h3 class="docs-menu__links-title">Tutorials</h3><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../beginner-tutorials/index.html">Vector Search Basics</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../beginner-tutorials/search-beginners/index.html">Semantic Search 101</a></li><li class="docs-menu__links-submenu-item"><a href="../../beginner-tutorials/neural-search/index.html">Build a Neural Search Service</a></li><li class="docs-menu__links-submenu-item"><a href="../../beginner-tutorials/hybrid-search-fastembed/index.html">Setup Hybrid Search with FastEmbed</a></li><li class="docs-menu__links-submenu-item"><a href="../../beginner-tutorials/retrieval-quality/index.html">Measure Search Quality</a></li></ul></nav></details><details class="docs-menu__links-group link-group active" open=""><summary class="docs-menu__links-group-heading"><a href="../index.html">Advanced Retrieval</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../reranking-hybrid-search/index.html">Reranking in Hybrid Search</a></li><li class="docs-menu__links-submenu-item active"><a href="index.html">Search Through Your Codebase</a></li><li class="docs-menu__links-submenu-item"><a href="../collaborative-filtering/index.html">Build a Recommendation System with Collaborative Filtering</a></li><li class="docs-menu__links-submenu-item"><a href="../pdf-retrieval-at-scale/index.html">Scaling PDF Retrieval with Solvio</a></li></ul></nav></details><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../database-tutorials/index.html">Using the Database</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../database-tutorials/bulk-upload/index.html">Bulk Upload Vectors</a></li><li class="docs-menu__links-submenu-item"><a href="../../database-tutorials/create-snapshot/index.html">Create &amp; Restore Snapshots</a></li><li class="docs-menu__links-submenu-item"><a href="../../database-tutorials/large-scale-search/index.html">Large Scale Search</a></li><li class="docs-menu__links-submenu-item"><a href="../../database-tutorials/huggingface-datasets/index.html">Load a HuggingFace Dataset</a></li><li class="docs-menu__links-submenu-item"><a href="../../database-tutorials/async-api/index.html">Build With Async API</a></li></ul></nav></details><h3 class="docs-menu__links-title">Support</h3><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../faq/solvio-fundamentals/index.html">FAQ</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../faq/solvio-fundamentals/index.html">Solvio Fundamentals</a></li><li class="docs-menu__links-submenu-item"><a href="../../faq/database-optimization/index.html">Database Optimization</a></li></ul></nav></details></nav></div></div><div class="documentation__content"><div class="documentation__content-wrapper"><div class="documentation__article-wrapper"><ul class="docs-breadcrumbs"><li class="docs-breadcrumbs__crumb"><a href="../../index.html">Documentation</a></li><li class="docs-breadcrumbs__crumb-separator"></li><li class="docs-breadcrumbs__crumb"><a href="../index.html">Advanced tutorials</a></li><li class="docs-breadcrumbs__crumb-separator"></li><li class="docs-breadcrumbs__crumb">Search Through Your Codebase</li></ul><article class="documentation-article"><h1 id="navigate-your-codebase-with-semantic-search-and-solvio">Navigate Your Codebase with Semantic Search and Solvio</h1><div class="table-responsive"><table class="table mb-5"><thead><tr><th>Time: 45 min</th><th>Level: Intermediate</th><th><a href="https://colab.research.google.com/github/solvio/examples/blob/master/code-search/code-search.ipynb" rel="noopener nofollow" target="_blank"><img alt="Open In Colab" src="https://colab.research.google.com/assets/colab-badge.svg"/></a></th><th></th></tr></thead><tbody></tbody></table></div><p>You too can enrich your applications with Solvio semantic search. In this
tutorial, we describe how you can use Solvio to navigate a codebase, to help
you find relevant code snippets. As an example, we will use the <a href="https://github.com/solvio/solvio" rel="noopener nofollow" target="_blank">Solvio</a>
source code itself, which is mostly written in Rust.</p><aside role="status">This tutorial might not work on code bases that are not disciplined or structured. For good code search, you may need to refactor the project first.</aside><h2 id="the-approach">The approach</h2><p>We want to search codebases using natural semantic queries, and searching for code based on similar logic. You can set up these tasks with embeddings:</p><ol><li>General usage neural encoder for Natural Language Processing (NLP), in our case
<code>sentence-transformers/all-MiniLM-L6-v2</code>.</li><li>Specialized embeddings for code-to-code similarity search. We use the
<code>jina-embeddings-v2-base-code</code> model.</li></ol><p>To prepare our code for <code>all-MiniLM-L6-v2</code>, we preprocess the code to text that
more closely resembles natural language. The Jina embeddings model supports a
variety of standard programming languages, so there is no need to preprocess the
snippets. We can use the code as is.</p><p>NLP-based search is based on function signatures, but code search may return
smaller pieces, such as loops. So, if we receive a particular function signature
from the NLP model and part of its implementation from the code model, we merge
the results and highlight the overlap.</p><h2 id="data-preparation">Data preparation</h2><p>Chunking the application sources into smaller parts is a non-trivial task. In
general, functions, class methods, structs, enums, and all the other language-specific
constructs are good candidates for chunks. They are big enough to
contain some meaningful information, but small enough to be processed by
embedding models with a limited context window. You can also use docstrings,
comments, and other metadata can be used to enrich the chunks with additional
information.</p><p><img alt="Code chunking strategy" src="../../tutorials/code-search/data-chunking.png"/></p><h3 id="parsing-the-codebase">Parsing the codebase</h3><p>While our example uses Rust, you can use our approach with any other language.
You can parse code with a <a href="https://microsoft.github.io/language-server-protocol/" rel="noopener nofollow" target="_blank">Language Server Protocol</a> (<strong>LSP</strong>)
compatible tool. You can use an LSP to build a graph of the codebase, and then extract chunks.
We did our work with the <a href="https://rust-analyzer.github.io/" rel="noopener nofollow" target="_blank">rust-analyzer</a>.
We exported the parsed codebase into the <a href="https://microsoft.github.io/language-server-protocol/specifications/lsif/0.4.0/specification/" rel="noopener nofollow" target="_blank">LSIF</a>
format, a standard for code intelligence data. Next, we used the LSIF data to
navigate the codebase and extract the chunks. For details, see our <a href="https://github.com/solvio/demo-code-search" rel="noopener nofollow" target="_blank">code search
demo</a>.</p><aside role="status">For other languages, you can use the same approach. There are
<a href="https://microsoft.github.io/language-server-protocol/implementors/servers/">plenty of implementations available
</a>.</aside><p>We then exported the chunks into JSON documents with not only the code itself,
but also context with the location of the code in the project. For example, see
the description of the <code>await_ready_for_timeout</code> function from the <code>IsReady</code>
struct in the <code>common</code> module:</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="nt">"name"</span><span class="p">:</span><span class="s2">"await_ready_for_timeout"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">   <span class="nt">"signature"</span><span class="p">:</span><span class="s2">"fn await_ready_for_timeout (&amp; self , timeout : Duration) -&gt; bool"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">   <span class="nt">"code_type"</span><span class="p">:</span><span class="s2">"Function"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">   <span class="nt">"docstring"</span><span class="p">:</span><span class="s2">"= \" Return `true` if ready, `false` if timed out.\""</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">   <span class="nt">"line"</span><span class="p">:</span><span class="mi">44</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">   <span class="nt">"line_from"</span><span class="p">:</span><span class="mi">43</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">   <span class="nt">"line_to"</span><span class="p">:</span><span class="mi">51</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">   <span class="nt">"context"</span><span class="p">:{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">"module"</span><span class="p">:</span><span class="s2">"common"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">"file_path"</span><span class="p">:</span><span class="s2">"lib/collection/src/common/is_ready.rs"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">"file_name"</span><span class="p">:</span><span class="s2">"is_ready.rs"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">"struct_name"</span><span class="p">:</span><span class="s2">"IsReady"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">"snippet"</span><span class="p">:</span><span class="s2">"    /// Return `true` if ready, `false` if timed out.\n    pub fn await_ready_for_timeout(&amp;self, timeout: Duration) -&gt; bool {\n        let mut is_ready = self.value.lock();\n        if !*is_ready {\n            !self.condvar.wait_for(&amp;mut is_ready, timeout).timed_out()\n        } else {\n            true\n        }\n    }\n"</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>You can examine the Solvio structures, parsed in JSON, in the <a href="https://storage.googleapis.com/tutorial-attachments/code-search/structures.jsonl" rel="noopener nofollow" target="_blank"><code>structures.jsonl</code>
file</a>
in our Google Cloud Storage bucket. Download it and use it as a source of data for our code search.</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">wget https://storage.googleapis.com/tutorial-attachments/code-search/structures.jsonl
</span></span></code></pre></div><p>Next, load the file and parse the lines into a list of dictionaries:</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">json</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">structures</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl"><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"structures.jsonl"</span><span class="p">,</span> <span class="s2">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">fp</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">entry</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">structures</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="code-to-natural-language-conversion">Code to <em>natural language</em> conversion</h3><p>Each programming language has its own syntax which is not a part of the natural
language. Thus, a general-purpose model probably does not understand the code
as is. We can, however, normalize the data by removing code specifics and
including additional context, such as module, class, function, and file name.
We took the following steps:</p><ol><li>Extract the signature of the function, method, or other code construct.</li><li>Divide camel case and snake case names into separate words.</li><li>Take the docstring, comments, and other important metadata.</li><li>Build a sentence from the extracted data using a predefined template.</li><li>Remove the special characters and replace them with spaces.</li></ol><p>As input, expect dictionaries with the same structure. Define a <code>textify</code>
function to do the conversion. We’ll use an <code>inflection</code> library to convert
with different naming conventions.</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">pip install inflection
</span></span></code></pre></div><p>Once all dependencies are installed, we define the <code>textify</code> function:</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">inflection</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">re</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Any</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">textify</span><span class="p">(</span><span class="n">chunk</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Get rid of all the camel case / snake case</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># - inflection.underscore changes the camel case to snake case</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># - inflection.humanize converts the snake case to human readable form</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="n">inflection</span><span class="o">.</span><span class="n">humanize</span><span class="p">(</span><span class="n">inflection</span><span class="o">.</span><span class="n">underscore</span><span class="p">(</span><span class="n">chunk</span><span class="p">[</span><span class="s2">"name"</span><span class="p">]))</span>
</span></span><span class="line"><span class="cl">    <span class="n">signature</span> <span class="o">=</span> <span class="n">inflection</span><span class="o">.</span><span class="n">humanize</span><span class="p">(</span><span class="n">inflection</span><span class="o">.</span><span class="n">underscore</span><span class="p">(</span><span class="n">chunk</span><span class="p">[</span><span class="s2">"signature"</span><span class="p">]))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Check if docstring is provided</span>
</span></span><span class="line"><span class="cl">    <span class="n">docstring</span> <span class="o">=</span> <span class="s2">""</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">chunk</span><span class="p">[</span><span class="s2">"docstring"</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">        <span class="n">docstring</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"that does </span><span class="si">{</span><span class="n">chunk</span><span class="p">[</span><span class="s1">'docstring'</span><span class="p">]</span><span class="si">}</span><span class="s2"> "</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Extract the location of that snippet of code</span>
</span></span><span class="line"><span class="cl">    <span class="n">context</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="sa">f</span><span class="s2">"module </span><span class="si">{</span><span class="n">chunk</span><span class="p">[</span><span class="s1">'context'</span><span class="p">][</span><span class="s1">'module'</span><span class="p">]</span><span class="si">}</span><span class="s2"> "</span>
</span></span><span class="line"><span class="cl">        <span class="sa">f</span><span class="s2">"file </span><span class="si">{</span><span class="n">chunk</span><span class="p">[</span><span class="s1">'context'</span><span class="p">][</span><span class="s1">'file_name'</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">chunk</span><span class="p">[</span><span class="s2">"context"</span><span class="p">][</span><span class="s2">"struct_name"</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">        <span class="n">struct_name</span> <span class="o">=</span> <span class="n">inflection</span><span class="o">.</span><span class="n">humanize</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">inflection</span><span class="o">.</span><span class="n">underscore</span><span class="p">(</span><span class="n">chunk</span><span class="p">[</span><span class="s2">"context"</span><span class="p">][</span><span class="s2">"struct_name"</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">context</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"defined in struct </span><span class="si">{</span><span class="n">struct_name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">context</span><span class="si">}</span><span class="s2">"</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Combine all the bits and pieces together</span>
</span></span><span class="line"><span class="cl">    <span class="n">text_representation</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">chunk</span><span class="p">[</span><span class="s1">'code_type'</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> "</span>
</span></span><span class="line"><span class="cl">        <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">docstring</span><span class="si">}</span><span class="s2">"</span>
</span></span><span class="line"><span class="cl">        <span class="sa">f</span><span class="s2">"defined as </span><span class="si">{</span><span class="n">signature</span><span class="si">}</span><span class="s2"> "</span>
</span></span><span class="line"><span class="cl">        <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">context</span><span class="si">}</span><span class="s2">"</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Remove any special characters and concatenate the tokens</span>
</span></span><span class="line"><span class="cl">    <span class="n">tokens</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s2">"\W"</span><span class="p">,</span> <span class="n">text_representation</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">tokens</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="n">tokens</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="s2">" "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span>
</span></span></code></pre></div><p>Now we can use <code>textify</code> to convert all chunks into text representations:</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">text_representations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">textify</span><span class="p">,</span> <span class="n">structures</span><span class="p">))</span>
</span></span></code></pre></div><p>This is how the <code>await_ready_for_timeout</code> function description appears:</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Function Await ready for timeout that does Return true if ready false if timed out defined as Fn await ready for timeout self timeout duration bool defined in struct Is ready module common file is_ready rs
</span></span></code></pre></div><h2 id="ingestion-pipeline">Ingestion pipeline</h2><p>Next, we’ll build a pipeline for vectorizing the data and set up a semantic search mechanism for both embedding models.</p><h3 id="building-solvio-collection">Building Solvio collection</h3><p>We use the <code>solvio-client</code> library with the <code>fastembed</code> extra to interact with the Solvio server and generate vector embeddings locally. Let’s install it:</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">pip install <span class="s2">"solvio-client[fastembed]"</span>
</span></span></code></pre></div><p>Of course, we need a running Solvio server for vector search. If you need one,
you can <a href="../../quick-start/index.html">use a local Docker container</a>
or deploy it using the <a href="https://cloud.solvio.io/" rel="noopener nofollow" target="_blank">Solvio Cloud</a>.
You can use either to follow this tutorial. Configure the connection parameters:</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">QDRANT_URL</span> <span class="o">=</span> <span class="s2">"https://my-cluster.cloud.solvio.io:6333"</span> <span class="c1"># http://localhost:6333 for local instance</span>
</span></span><span class="line"><span class="cl"><span class="n">QDRANT_API_KEY</span> <span class="o">=</span> <span class="s2">"THIS_IS_YOUR_API_KEY"</span> <span class="c1"># None for local instance</span>
</span></span></code></pre></div><p>Then use the library to create a collection:</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">solvio_client</span> <span class="kn">import</span> <span class="n">SolvioClient</span><span class="p">,</span> <span class="n">models</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">client</span> <span class="o">=</span> <span class="n">SolvioClient</span><span class="p">(</span><span class="n">QDRANT_URL</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="n">QDRANT_API_KEY</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">client</span><span class="o">.</span><span class="n">create_collection</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s2">"solvio-sources"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">vectors_config</span><span class="o">=</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">"text"</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">VectorParams</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">size</span><span class="o">=</span><span class="n">client</span><span class="o">.</span><span class="n">get_embedding_size</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">model_name</span><span class="o">=</span><span class="s2">"sentence-transformers/all-MiniLM-L6-v2"</span>
</span></span><span class="line"><span class="cl">            <span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">distance</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">Distance</span><span class="o">.</span><span class="n">COSINE</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="s2">"code"</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">VectorParams</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">size</span><span class="o">=</span><span class="n">client</span><span class="o">.</span><span class="n">get_embedding_size</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">model_name</span><span class="o">=</span><span class="s2">"jinaai/jina-embeddings-v2-base-code"</span>
</span></span><span class="line"><span class="cl">            <span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">distance</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">Distance</span><span class="o">.</span><span class="n">COSINE</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><p>Our newly created collection is ready to accept the data. Let’s upload the embeddings:</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">uuid</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Extract the code snippets from the structures to a separate list</span>
</span></span><span class="line"><span class="cl"><span class="n">code_snippets</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="n">structure</span><span class="p">[</span><span class="s2">"context"</span><span class="p">][</span><span class="s2">"snippet"</span><span class="p">]</span> <span class="k">for</span> <span class="n">structure</span> <span class="ow">in</span> <span class="n">structures</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">points</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="n">models</span><span class="o">.</span><span class="n">PointStruct</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="nb">id</span><span class="o">=</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">=</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s2">"text"</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">Document</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">"sentence-transformers/all-MiniLM-L6-v2"</span>
</span></span><span class="line"><span class="cl">            <span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="s2">"code"</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">Document</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">text</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">"jinaai/jina-embeddings-v2-base-code"</span>
</span></span><span class="line"><span class="cl">            <span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="n">payload</span><span class="o">=</span><span class="n">structure</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">text</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">structure</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">text_representations</span><span class="p">,</span> <span class="n">code_snippets</span><span class="p">,</span> <span class="n">structures</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Note: This might take a while since inference happens implicitly.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Parallel processing can help.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># But too many processes may trigger swap memory and hurt performance.</span>
</span></span><span class="line"><span class="cl"><span class="n">client</span><span class="o">.</span><span class="n">upload_points</span><span class="p">(</span><span class="s2">"solvio-sources"</span><span class="p">,</span> <span class="n">points</span><span class="o">=</span><span class="n">points</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
</span></span></code></pre></div><p>Internally, <code>solvio-client</code> uses <a href="https://github.com/solvio/fastembed" rel="noopener nofollow" target="_blank">FastEmbed</a> to implicitly convert our documents into their vector representations.
The uploaded points are immediately available for search. Next, query the
collection to find relevant code snippets.</p><h2 id="querying-the-codebase">Querying the codebase</h2><p>We use one of the models to search the collection. Start with text embeddings.
Run the following query “<em>How do I count points in a collection?</em>”. Review the
results.</p><aside role="status">In these tables, we link to longer code excerpts from a
`file_name` in the `Solvio` repository. The results are subject to change.
Fortunately, this model should continue to provide the results you need.</aside><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">query</span> <span class="o">=</span> <span class="s2">"How do I count points in a collection?"</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">hits</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">query_points</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s2">"solvio-sources"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">query</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">"sentence-transformers/all-MiniLM-L6-v2"</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">using</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">limit</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span><span class="o">.</span><span class="n">points</span>
</span></span></code></pre></div><p>Now, review the results. The following table lists the module, the file name
and score. Each line includes a link to the signature, as a code block from
the file.</p><div class="table-responsive"><table class="table mb-5"><thead><tr><th>module</th><th>file_name</th><th>score</th><th>signature</th></tr></thead><tbody><tr><td>toc</td><td>point_ops.rs</td><td>0.59448624</td><td><a href="https://github.com/solvio/solvio/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/storage/src/content_manager/toc/point_ops.rs#L120" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>pub async fn count</code></a></td></tr><tr><td>operations</td><td>types.rs</td><td>0.5493385</td><td><a href="https://github.com/solvio/solvio/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/collection/src/operations/types.rs#L831" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>pub struct CountRequestInternal</code></a></td></tr><tr><td>collection_manager</td><td>segments_updater.rs</td><td>0.5121002</td><td><a href="https://github.com/solvio/solvio/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/collection/src/collection_manager/segments_updater.rs#L339" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>pub(crate) fn upsert_points&lt;'a, T&gt;</code></a></td></tr><tr><td>collection</td><td>point_ops.rs</td><td>0.5063539</td><td><a href="https://github.com/solvio/solvio/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/collection/src/collection/point_ops.rs#L213" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>pub async fn count</code></a></td></tr><tr><td>map_index</td><td>mod.rs</td><td>0.49973983</td><td><a href="https://github.com/solvio/solvio/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/segment/src/index/field_index/map_index/mod.rs#L88" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>fn get_points_with_value_count&lt;Q&gt;</code></a></td></tr></tbody></table></div><p>It seems we were able to find some relevant code structures. Let’s try the same with the code embeddings:</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">hits</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">query_points</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s2">"solvio-sources"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">query</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">"jinaai/jina-embeddings-v2-base-code"</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">using</span><span class="o">=</span><span class="s2">"code"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">limit</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span><span class="o">.</span><span class="n">points</span>
</span></span></code></pre></div><p>Output:</p><div class="table-responsive"><table class="table mb-5"><thead><tr><th>module</th><th>file_name</th><th>score</th><th>signature</th></tr></thead><tbody><tr><td>field_index</td><td>geo_index.rs</td><td>0.73278356</td><td><a href="https://github.com/solvio/solvio/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/segment/src/index/field_index/geo_index.rs#L612" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>fn count_indexed_points</code></a></td></tr><tr><td>numeric_index</td><td>mod.rs</td><td>0.7254976</td><td><a href="https://github.com/solvio/solvio/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/index/field_index/numeric_index/mod.rs#L322" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>fn count_indexed_points</code></a></td></tr><tr><td>map_index</td><td>mod.rs</td><td>0.7124739</td><td><a href="https://github.com/solvio/solvio/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/index/field_index/map_index/mod.rs#L315" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>fn count_indexed_points</code></a></td></tr><tr><td>map_index</td><td>mod.rs</td><td>0.7124739</td><td><a href="https://github.com/solvio/solvio/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/index/field_index/map_index/mod.rs#L429" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>fn count_indexed_points</code></a></td></tr><tr><td>fixtures</td><td>payload_context_fixture.rs</td><td>0.706204</td><td><a href="https://github.com/solvio/solvio/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/fixtures/payload_context_fixture.rs#L122" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>fn total_point_count</code></a></td></tr></tbody></table></div><p>While the scores retrieved by different models are not comparable, but we can
see that the results are different. Code and text embeddings can capture
different aspects of the codebase. We can use both models to query the collection
and then combine the results to get the most relevant code snippets, from a single batch request.</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">responses</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">query_batch_points</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">collection_name</span><span class="o">=</span><span class="s2">"solvio-sources"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">requests</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="n">models</span><span class="o">.</span><span class="n">QueryRequest</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">query</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">Document</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">text</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">"sentence-transformers/all-MiniLM-L6-v2"</span>
</span></span><span class="line"><span class="cl">            <span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">using</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">with_payload</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">limit</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="n">models</span><span class="o">.</span><span class="n">QueryRequest</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">query</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">Document</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">text</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">"jinaai/jina-embeddings-v2-base-code"</span>
</span></span><span class="line"><span class="cl">            <span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">using</span><span class="o">=</span><span class="s2">"code"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">with_payload</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">limit</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="n">response</span><span class="o">.</span><span class="n">points</span> <span class="k">for</span> <span class="n">response</span> <span class="ow">in</span> <span class="n">responses</span><span class="p">]</span>
</span></span></code></pre></div><p>Output:</p><div class="table-responsive"><table class="table mb-5"><thead><tr><th>module</th><th>file_name</th><th>score</th><th>signature</th></tr></thead><tbody><tr><td>toc</td><td>point_ops.rs</td><td>0.59448624</td><td><a href="https://github.com/solvio/solvio/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/storage/src/content_manager/toc/point_ops.rs#L120" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>pub async fn count</code></a></td></tr><tr><td>operations</td><td>types.rs</td><td>0.5493385</td><td><a href="https://github.com/solvio/solvio/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/collection/src/operations/types.rs#L831" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>pub struct CountRequestInternal</code></a></td></tr><tr><td>collection_manager</td><td>segments_updater.rs</td><td>0.5121002</td><td><a href="https://github.com/solvio/solvio/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/collection/src/collection_manager/segments_updater.rs#L339" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>pub(crate) fn upsert_points&lt;'a, T&gt;</code></a></td></tr><tr><td>collection</td><td>point_ops.rs</td><td>0.5063539</td><td><a href="https://github.com/solvio/solvio/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/collection/src/collection/point_ops.rs#L213" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>pub async fn count</code></a></td></tr><tr><td>map_index</td><td>mod.rs</td><td>0.49973983</td><td><a href="https://github.com/solvio/solvio/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/segment/src/index/field_index/map_index/mod.rs#L88" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>fn get_points_with_value_count&lt;Q&gt;</code></a></td></tr><tr><td>field_index</td><td>geo_index.rs</td><td>0.73278356</td><td><a href="https://github.com/solvio/solvio/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/segment/src/index/field_index/geo_index.rs#L612" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>fn count_indexed_points</code></a></td></tr><tr><td>numeric_index</td><td>mod.rs</td><td>0.7254976</td><td><a href="https://github.com/solvio/solvio/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/index/field_index/numeric_index/mod.rs#L322" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>fn count_indexed_points</code></a></td></tr><tr><td>map_index</td><td>mod.rs</td><td>0.7124739</td><td><a href="https://github.com/solvio/solvio/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/index/field_index/map_index/mod.rs#L315" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>fn count_indexed_points</code></a></td></tr><tr><td>map_index</td><td>mod.rs</td><td>0.7124739</td><td><a href="https://github.com/solvio/solvio/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/index/field_index/map_index/mod.rs#L429" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>fn count_indexed_points</code></a></td></tr><tr><td>fixtures</td><td>payload_context_fixture.rs</td><td>0.706204</td><td><a href="https://github.com/solvio/solvio/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/fixtures/payload_context_fixture.rs#L122" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>fn total_point_count</code></a></td></tr></tbody></table></div><p>This is one example of how you can use different models and combine the results.
In a real-world scenario, you might run some reranking and deduplication, as
well as additional processing of the results.</p><h3 id="code-search-demo">Code search demo</h3><p>Our <a href="https://code-search.solvio.tech/" rel="noopener nofollow" target="_blank">Code search demo</a> uses the following process:</p><ol><li>The user sends a query.</li><li>Both models vectorize that query simultaneously. We get two different
vectors.</li><li>Both vectors are used in parallel to find relevant snippets. We expect
5 examples from the NLP search and 20 examples from the code search.</li><li>Once we retrieve results for both vectors, we merge them in one of the
following scenarios:<ol><li>If both methods return different results, we prefer the results from
the general usage model (NLP).</li><li>If there is an overlap between the search results, we merge overlapping
snippets.</li></ol></li></ol><p>In the screenshot, we search for <code>flush of wal</code>. The result
shows relevant code, merged from both models. Note the highlighted
code in lines 621-629. It’s where both models agree.</p><p><img alt="Results from both models, with overlap" src="../../tutorials/code-search/code-search-demo-example.png"/></p><p>Now you see semantic code intelligence, in action.</p><h3 id="grouping-the-results">Grouping the results</h3><p>You can improve the search results, by grouping them by payload properties.
In our case, we can group the results by the module. If we use code embeddings,
we can see multiple results from the <code>map_index</code> module. Let’s group the
results and assume a single result per module:</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">results</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">query_points_groups</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">collection_name</span><span class="o">=</span><span class="s2">"solvio-sources"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">using</span><span class="o">=</span><span class="s2">"code"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">query</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">"jinaai/jina-embeddings-v2-base-code"</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">group_by</span><span class="o">=</span><span class="s2">"context.module"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">limit</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">group_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><p>Output:</p><div class="table-responsive"><table class="table mb-5"><thead><tr><th>module</th><th>file_name</th><th>score</th><th>signature</th></tr></thead><tbody><tr><td>field_index</td><td>geo_index.rs</td><td>0.73278356</td><td><a href="https://github.com/solvio/solvio/blob/7aa164bd2dda1c0fc9bf3a0da42e656c95c2e52a/lib/segment/src/index/field_index/geo_index.rs#L612" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>fn count_indexed_points</code></a></td></tr><tr><td>numeric_index</td><td>mod.rs</td><td>0.7254976</td><td><a href="https://github.com/solvio/solvio/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/index/field_index/numeric_index/mod.rs#L322" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>fn count_indexed_points</code></a></td></tr><tr><td>map_index</td><td>mod.rs</td><td>0.7124739</td><td><a href="https://github.com/solvio/solvio/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/index/field_index/map_index/mod.rs#L315" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>fn count_indexed_points</code></a></td></tr><tr><td>fixtures</td><td>payload_context_fixture.rs</td><td>0.706204</td><td><a href="https://github.com/solvio/solvio/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/fixtures/payload_context_fixture.rs#L122" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>fn total_point_count</code></a></td></tr><tr><td>hnsw_index</td><td>graph_links.rs</td><td>0.6998417</td><td><a href="https://github.com/solvio/solvio/blob/3fbe1cae6cb7f51a0c5bb4b45cfe6749ac76ed59/lib/segment/src/index/hnsw_index/graph_links.rs#L477" rel="noopener nofollow" target="_blank"><img src="../../tutorials/code-search/github-mark.png" style="display:inline" width="16"/> <code>fn num_points</code></a></td></tr></tbody></table></div><p>With the grouping feature, we get more diverse results.</p><h2 id="summary">Summary</h2><p>This tutorial demonstrates how to use Solvio to navigate a codebase. For an
end-to-end implementation, review the <a href="https://colab.research.google.com/github/solvio/examples/blob/master/code-search/code-search.ipynb" rel="noopener nofollow" target="_blank">code search
notebook</a> and the
<a href="https://github.com/solvio/demo-code-search" rel="noopener nofollow" target="_blank">code-search-demo</a>. You can also check out <a href="https://code-search.solvio.tech/" rel="noopener nofollow" target="_blank">a running version of the code
search demo</a> which exposes Solvio codebase for search with a web interface.</p></article><section class="docs-feedback d-print-none"><h5 class="docs-feedback__title">Was this page useful?</h5><div class="docs-feedback__buttons"><button class="button button_outlined button_sm docs-feedback__button" id="feedback__answer_yes">
<img alt="Thumb up icon" src="../../../icons/outline/thumb-up.svg"/>
Yes
</button>
<button class="button button_outlined button_sm docs-feedback__button" id="feedback__answer_no">
<img alt="Thumb down icon" src="../../../icons/outline/thumb-down.svg"/>
No</button></div></section><section class="docs-feedback__responses d-none"><p class="docs-feedback__response docs-feedback__response_yes" id="feedback__response_yes">Thank you for your feedback! 🙏</p><p class="docs-feedback__response docs-feedback__response_no" id="feedback__response_no">We are sorry to hear that. 😔 You can <a class="text-brand-p" href="https:/github.com/solvio/landing_page/tree/master/solvio-landing/content/documentation/advanced-tutorials/code-search.md" target="_blank">edit</a> this page on GitHub, or <a class="text-brand-p" href="https://github.com/solvio/landing_page/issues/new/choose" target="_blank">create</a> a GitHub issue.</p></section><script>const buttonsSection=document.querySelector(".docs-feedback"),responsesSection=document.querySelector(".docs-feedback__responses"),yesButton=document.querySelector("#feedback__answer_yes"),noButton=document.querySelector("#feedback__answer_no"),yesResponse=document.querySelector("#feedback__response_yes"),noResponse=document.querySelector("#feedback__response_no"),toggleResponses=()=>{buttonsSection.classList.add("d-none"),responsesSection.classList.remove("d-none")};yesButton.addEventListener("click",()=>{yesResponse.classList.add("feedback__response_visible"),toggleResponses()}),noButton.addEventListener("click",()=>{noResponse.classList.add("feedback__response_visible"),toggleResponses()})</script></div><div class="table-of-contents"><p class="table-of-contents__head">On this page:</p><nav id="TableOfContents"><ul><li><a href="index.html#navigate-your-codebase-with-semantic-search-and-solvio">Navigate Your Codebase with Semantic Search and Solvio</a><ul><li><a href="index.html#the-approach">The approach</a></li><li><a href="index.html#data-preparation">Data preparation</a><ul><li><a href="index.html#parsing-the-codebase">Parsing the codebase</a></li><li><a href="index.html#code-to-natural-language-conversion">Code to <em>natural language</em> conversion</a></li></ul></li><li><a href="index.html#ingestion-pipeline">Ingestion pipeline</a><ul><li><a href="index.html#building-solvio-collection">Building Solvio collection</a></li></ul></li><li><a href="index.html#querying-the-codebase">Querying the codebase</a><ul><li><a href="index.html#code-search-demo">Code search demo</a></li><li><a href="index.html#grouping-the-results">Grouping the results</a></li></ul></li><li><a href="index.html#summary">Summary</a></li></ul></li></ul></nav></div><footer class="docs-footer w-100 py-0 pt-0 pb-4 pb-xl-0"><div class="docs-footer__cta"><h4>Ready to get started with Solvio?</h4><a class="button button_outlined button_sm" href="https://solvio.to/cloud/" target="_blank">Start Free</a></div><div class="docs-footer__bottom"><div class="docs-footer__bottom-content"><span>© 2025 Solvio.</span></div></div></footer></div></div></div></div></section></main></body><script async="" type="text/javascript">function OptanonWrapper(){const e=new CustomEvent("onetrust_loaded");document.dispatchEvent(e)}</script><script>!function(){const o="eQYi1nZE2zQSmnHuxjMRlDd2uLl65oHe";var n,s,t="analytics",e=window[t]=window[t]||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","screen","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware","register"],e.factory=function(n){return function(){if(window[t].initialized)return window[t][n].apply(window[t],arguments);var o,s=Array.prototype.slice.call(arguments);return["track","screen","alias","group","page","identify"].indexOf(n)>-1&&(o=document.querySelector("link[rel='canonical']"),s.push({__t:"bpc",c:o&&o.getAttribute("href")||void 0,p:location.pathname,u:location.href,s:location.search,t:document.title,r:document.referrer})),s.unshift(n),e.push(s),e}};for(n=0;n<e.methods.length;n++)s=e.methods[n],e[s]=e.factory(s);e.load=function(n,s){var i,o=document.createElement("script");o.type="text/javascript",o.async=!0,o.setAttribute("data-global-segment-analytics-key",t),o.src="https://evs.analytics.solvio.tech/5caWuitPgcGFN5Q7HMpTaj/vEkmzjuRSqeXGbhGAFTWex.min.js",i=document.getElementsByTagName("script")[0],i.parentNode.insertBefore(o,i),e._loadOptions=s},e._writeKey=o,e._cdn="https://evs.analytics.solvio.tech",e.SNIPPET_VERSION="5.2.0",e.load(o)}}()</script><script src="../../../js/google-setup.min.14728a3ae9bd931593645b6ddbfe801d400cd2970006e782cb67f3966654248ca962dbaf4cf371493a2d326861b3a691a99d6d8349c8b2752339ab91d3787069.js"></script><script src="../../../js/index.min.e37feda1952d752f5568e1ebc55e183629e4d361f4df09edeed70b4a4327d601161c4147bdbe4149b4a3cdc1ed43f1bf1a2f2340a421f1aa821103980dfe0bda.js"></script><script src="../../../js/search/search.min.328025828a7fa9c307213f15802ebd03c13ee7ed57de2f78c6afa8f4559c91029ddc3ff057e542aeff95f130e0a5d07867b9a83183de7ac0fa73c1ceb18d6e0d.js" type="module"></script><script src="../../../js/search/scroll.min.1d7f8fa4537bd0d17128ff206e3895d438bb6f14f60db3f4fbb3d47922ad458da372a2c793e6ce2442b65559423423d7fdc84617b1ed80893a151065ae408e37.js"></script><script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script><script src="../../../js/copy-code.min.95b03a45b2ab4b7a608ecfd4b5919c8572a5b2cd1463f52561cd10976abf3b74334f91324c0e620cb80afac46026a0b18cce6fb753d8495f74c6d478c8ca1d03.js"></script><script src="../../../js/lang-switcher.min.63da11cef09772078425b1ee56415b9c37842a9399f2ba2d2f5efbf72fb751686c410bd50e9bcd283c8231cb97c1973199d4923beef29d8b06e59d9983a6ba51.js"></script><script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script src="../../../js/vendor/anchor.min.0e138e17ebcf1c1147a7a3a81d9ac3c601622eedc479f1636470eb2552470f4e27c9a8efe6e8378995dedc1ab67029d8989536ea76f0857d45d1615ae772b8a1.js"></script><script>document.addEventListener("keydown",function(e){if((e.metaKey||e.ctrlKey)&&e.key==="k"){e.preventDefault();let t=document.querySelector('[data-target="#searchModal"]');t&&t?.click()}})</script><script>window.addEventListener("message",e=>{if(e.data.type==="hsFormCallback"&&e.data.eventName==="onFormReady"){const t=document.querySelector(`form[data-form-id="${e.data.id}"]`);if(t){const e=t.querySelector('[name="last_form_fill_url"]');e&&(e.value=window.location.href);const n=t.querySelector('[name="referrer_url"]');n&&(n.value=document.referrer)}}})</script></html>