<!DOCTYPE html>

<html lang="en"><head><meta content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui" name="viewport"/><meta charset="utf-8"/><title>Scaling PDF Retrieval with Solvio - Solvio</title>
<link href="../../../favicon/favicon.ico" rel="icon"/><link href="https://trysolvio.com/favicon/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/><link href="../../../favicon/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/><link href="../../../favicon/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/><link href="../../../favicon/site.webmanifest" rel="manifest"/><link color="#5bbad5" href="https://trysolvio.com/favicon/safari-pinned-tab.svg" rel="mask-icon"/><meta content="#2b5797" name="msapplication-TileColor"/><meta content="/favicon/browserconfig.xml" name="msapplication-config"/><meta content="#ffffff" name="theme-color"/><meta content="solvio" name="partition"/><link href="../../../css/search/search.min.09596ee2b3c94d0ac82a1c33199cabdb3e0210b1ee46aaf1515200e9e484d05dd9e27cc1e861c58cc2e582af162f63b8e180ff2a12f7a6592b7aeaa0a7125130.css" rel="stylesheet"/><link href="../../../css/documentation.min.e6f67f5814d6056e5fc0a24dbfe9ef87a89b7a1dbbf6879b5c2a9e9f4085856b9ef4e76f1ff104a0df4f37f4ee8b5df86b04162b08534ee92b75bcb82a6c64bb.css" rel="stylesheet"/><meta content="Hugo 0.141.0" name="generator"/><meta content="Optimizing PDF retrieval at scale with Solvio and Vision Large Language Models (VLLMs) such as ColPali and ColQwen. Two-stage retrieval with multivector representations mean pooling." name="description"/><meta content="vector search engine,neural network,matching,SaaS,approximate nearest neighbor search,image search,recommender system,vectors,knn algorithm,hnsw,vector search,embeddings,similarity,simaes networks,BERT,transformer,word2vec,fasttext,solvio" name="keywords"/><script type="application/ld+json">{"@context":"https://schema.org","@graph":[{"@id":"https://trysolvio.com/documentation/advanced-tutorials/pdf-retrieval-at-scale/#article","@type":"Article","abstract":"Optimizing PDF retrieval at scale with Solvio and Vision Large Language Models VLLMs such as ColPali and ColQwen Twostage retrieval with multivector representations mean pooling","author":{"@type":"Organization","name":"Solvio","url":"https://trysolvio.com/"},"dateModified":"0001-01-01 00:00:00 +0000 UTC","datePublished":"0001-01-01 00:00:00 +0000 UTC","description":"Optimizing PDF retrieval at scale with Solvio and Vision Large Language Models VLLMs such as ColPali and ColQwen Twostage retrieval with multivector representations mean pooling","headline":"Scaling PDF Retrieval with Solvio","image":["https://trysolvio.com/documentation/tutorials/pdf-retrieval-at-scale/social_preview.png"],"name":"Scaling PDF Retrieval with Solvio","url":"https://trysolvio.com/documentation/advanced-tutorials/pdf-retrieval-at-scale/","wordCount":"1767"},{"@id":"https://trysolvio.com/documentation/advanced-tutorials/pdf-retrieval-at-scale/#organization","@type":"Organization","address":{"@type":"PostalAddress","addressCountry":"DE","addressLocality":"Berlin","addressRegion":"Berlin","postalCode":"10115","streetAddress":"Chausseestra√üe 86"},"contactPoint":{"@type":"ContactPoint","contactType":"customer support","email":"info@solvio.com","telephone":"+49 3040797694"},"description":"Solvio is an Open-Source Vector Database and Vector Search Engine written in Rust. It provides fast and scalable vector similarity search service with convenient API.","email":"info@solvio.com","founders":[{"@type":"Person","name":"map[email:info@solvio.tech name:Andrey Vasnetsov]"},{"@type":"Person","name":"Andre Zayarni"}],"foundingDate":"2021","keywords":["vector search engine","neural network","matching","SaaS","approximate nearest neighbor search","image search","recommender system","vectors","knn algorithm","hnsw","vector search","embeddings","similarity","simaes networks","BERT","transformer","word2vec","fasttext","Solvio"],"legalName":"Solvio Solutions GmbH","location":"Berlin, Germany","logo":"https://trysolvio.com/images/logo_with_text.png","name":"Solvio","sameAs":["https://github.com/solvio/solvio","https://solvio.to/discord","https://www.youtube.com/channel/UC6ftm8PwH1RU_LM1jwG0LQA","https://www.linkedin.com/company/solvio/","https://twitter.com/solvio_engine"],"url":"https://solvio.tech"}]}</script><meta content="https://trysolvio.com/documentation/advanced-tutorials/pdf-retrieval-at-scale/" property="og:url"/><meta content="website" property="og:type"/><meta content="Scaling PDF Retrieval with Solvio - Solvio" property="og:title"/><meta content="summary_large_image" name="twitter:card"/><meta content="solvio" name="twitter:domain"/><meta content="https://trysolvio.com/documentation/advanced-tutorials/pdf-retrieval-at-scale/" name="twitter:url"/><meta content="Scaling PDF Retrieval with Solvio - Solvio" name="twitter:title"/><meta content="Optimizing PDF retrieval at scale with Solvio and Vision Large Language Models (VLLMs) such as ColPali and ColQwen. Two-stage retrieval with multivector representations mean pooling." property="og:description"/><meta content="Optimizing PDF retrieval at scale with Solvio and Vision Large Language Models (VLLMs) such as ColPali and ColQwen. Two-stage retrieval with multivector representations mean pooling." name="twitter:description"/><meta content="https://trysolvio.com/documentation/tutorials/pdf-retrieval-at-scale/social_preview.png" name="image" property="og:image"/><meta content="https://trysolvio.com/documentation/tutorials/pdf-retrieval-at-scale/social_preview.png" name="image" property="og:image:secure_url"/><meta content="image/jpeg" property="og:image:type"/><meta content="1200" property="og:image:width"/><meta content="630" property="og:image:height"/><meta content="https://trysolvio.com/documentation/tutorials/pdf-retrieval-at-scale/social_preview.png" name="twitter:image:src"/><link href="index.html" rel="canonical"/><script src="https://js-eu1.hsforms.net/forms/embed/v2.js" type="text/javascript"></script><script src="../../../js/documentation.min.594fc9226f6fb87b8c3b0cafb9d5c0b0bcd95f47d292b929aab04315e0506706b2f376dc4fae9961dc3082138cb19d45b2a3370ee8e881bbf4b8c91dcb735c32.js"></script></head><body><main><header class="docs-header"><div class="main-menu z-5"><a href="https://trysolvio.com/"><div class="logo"><img alt="logo" class="logo__img" src="../../../img/solvio-logo.png"/></div></a><div class="d-flex d-xl-none justify-content-end align-items-center gap-4"><div class="d-block d-xl-none"><button class="theme-switch" role="button"></button></div><button class="main-menu__trigger" type="button"><svg fill="none" height="24" viewbox="0 0 24 24" width="24"><path d="M1 12H23" stroke="#e1e5f0" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path><path d="M1 5H23" stroke="#e1e5f0" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path><path d="M1 19H23" stroke="#e1e5f0" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></button></div><ul class="main-menu__links"><li class="main-menu__item"><a class="menu-linkactive" href="../../index.html">Solvio</a></li><li class="main-menu__item"><a class="menu-link" href="../../cloud-intro/index.html">Cloud</a></li><li class="main-menu__item"><a class="menu-link" href="../../build/index.html">Build</a></li><li class="main-menu__item"></li><li class="main-menu__item"></li></ul><div class="main-menu__buttons"><div class="main-menu__buttons-input"><button class="qdr-search-input-btn q-input input_md input_light-bg" data-target="#searchModal" name="search" type="button">
Search</button></div><button class="theme-switch" role="button"></button>
</div></div><div class="menu-mobile"><div class="menu-mobile__header"><div class="logo"><img alt="logo" class="logo__img" src="../../../img/solvio-logo.png"/></div><div class="d-flex d-xl-none justify-content-end align-items-center gap-4"><div class="d-block d-xl-none"><button class="theme-switch" role="button"></button></div><button class="menu-mobile__close" type="button"><svg fill="none" height="24" viewbox="0 0 24 24" width="24"><g id="Close"><path clip-rule="evenodd" d="M19.778 5.63606C20.1685 5.24554 20.1685 4.61237 19.778 4.22185 19.3874 3.83132 18.7543 3.83132 18.3637 4.22185L11.9998 10.5858 5.63586 4.22185c-.39052-.39053-1.02369-.39053-1.41421.0C3.83112 4.61237 3.83112 5.24554 4.22165 5.63606L10.5856 12l-6.364 6.364C3.83108 18.7545 3.83108 19.3877 4.2216 19.7782 4.61213 20.1687 5.24529 20.1687 5.63582 19.7782l6.36398-6.364 6.364 6.364C18.7543 20.1687 19.3875 20.1687 19.778 19.7782 20.1685 19.3877 20.1685 18.7545 19.778 18.364L13.414 12l6.364-6.36394z" fill="#e1e5f0" fill-rule="evenodd" id="Vector"></path></g></svg></button></div></div><div class="main-menu__buttons-input"><button class="qdr-search-input-btn q-input input_md input_light-bg" data-target="#searchModal" name="search" type="button">
Search</button></div><ul class="menu-mobile__items"><li class="menu-mobile__item" data-path="menu-0"><div class="menu-mobile__item-content"><a class="active" href="../../index.html"><svg fill="#e1e5f0" height="16" viewbox="0 0 16 16" width="16"><g id="Menu/Documentation"><path clip-rule="evenodd" d="M4.25 1c-1.10092.0-2.12247.23681-2.88689.64443C.620129 2.04063.0 2.67297.0 3.5v11c0 .2761.223858.5.5.5s.5-.2239.5-.5c0-.278.21937-.6456.83364-.9732C2.42647 13.2107 3.27992 13 4.25 13 5.22008 13 6.07353 13.2107 6.66636 13.5268c.61427.3276.83364.6952.83364.9732.0.2761.22386.5.5.5s.5-.2239.5-.5c0-.278.21937-.6456.833640000000001-.9732C9.92647 13.2107 10.7799 13 11.75 13S13.5735 13.2107 14.1664 13.5268C14.7806 13.8544 15 14.222 15 14.5c0 .2761.2239.5.5.5s.5-.2239.5-.5V3.5C16 2.67297 15.3799 2.04063 14.6369 1.64443 13.8725 1.23681 12.8509 1 11.75 1s-2.12247.23681-2.88689.64443C8.53799 1.8178 8.2364 2.03638 8 2.29671c-.2364-.26033-.53799-.47891-.86311-.65228C6.37247 1.23681 5.35092 1 4.25 1zM1.36311 12.6444C1.23778 12.7113 1.11595 12.7848 1 12.8649V3.5c0-.27797.21937-.64563.83364-.97318C2.42647 2.21069 3.27992 2 4.25 2c.97008.0 1.82353.21069 2.41636.52682C7.28063 2.85437 7.5 3.22203 7.5 3.5v9.3649C7.38405 12.7848 7.26222 12.7113 7.13689 12.6444 6.37247 12.2368 5.35092 12 4.25 12 3.14908 12 2.12753 12.2368 1.36311 12.6444zM8.5 12.8649C8.61595 12.7848 8.73778 12.7113 8.86311 12.6444 9.62753 12.2368 10.6491 12 11.75 12S13.8725 12.2368 14.6369 12.6444C14.7622 12.7113 14.8841 12.7848 15 12.8649V3.5C15 3.22203 14.7806 2.85437 14.1664 2.52682 13.5735 2.21069 12.7201 2 11.75 2s-1.82353.21069-2.41636.52682C8.71937 2.85437 8.5 3.22203 8.5 3.5v9.3649z" fill-rule="evenodd" id="Vector"></path></g></svg>
Solvio</a></div></li><li class="menu-mobile__item" data-path="menu-1"><div class="menu-mobile__item-content"><a href="../../cloud-intro/index.html"><svg fill="#e1e5f0" height="16" viewbox="0 0 16 16" width="16"><g id="Menu/Cloud"><path clip-rule="evenodd" d="M7.5 2C4.57416 2 2.18128 4.28566 2.00983 7.16851.8403 7.57763.0 8.68965.0 10c0 1.6571 1.34286 3 3 3H13c1.6571.0 3-1.3429 3-3 0-1.65714-1.3429-3-3-3L12.9776 7.00009C12.7249 4.19714 10.3686 2 7.5 2zM3.00107 7.48137 3.00008 7.47308C3.01457 5.0006 5.02412 3 7.5 3c2.47599.0 4.4856 2.00079 4.4999 4.47342L11.9987 7.4836C11.9969 7.50027 11.995 7.52348 11.995 7.551 11.995 7.701 12.0623 7.84308 12.1785 7.93804 12.2946 8.03301 12.4472 8.07082 12.5942 8.04106 12.726 8.01438 12.8617 8 13 8c1.1049.0 2 .89514 2 2C15 11.1049 14.1049 12 13 12H3C1.89514 12 1 11.1049 1 10 1 9.03225 1.68901 8.22422 2.60364 8.04017 2.83708 7.9932 3.005 7.78812 3.005 7.55 3.005 7.52154 3.00291 7.49773 3.00107 7.48137z" fill-rule="evenodd" id="Vector"></path></g></svg>
Cloud</a></div></li><li class="menu-mobile__item" data-path="menu-2"><div class="menu-mobile__item-content"><a href="../../build/index.html"><svg fill="#e1e5f0" height="16" viewbox="0 0 16 16" width="16"><g id="Menu/Blog"><path clip-rule="evenodd" d="M0 1.5C0 1.22386.223858 1 .5 1h5c.27614.0.5.22386.5.5v5c0 .27614-.22386.5-.5.5H.5C.223858 7 0 6.77614.0 6.5v-5zM1 2V6H5V2H1zm7 .5c0-.27614.22386-.5.5-.5h7c.2761.0.5.22386.5.5s-.2239.5-.5.5h-7C8.22386 3 8 2.77614 8 2.5zM8.5 6c-.27614.0-.5.22386-.5.5s.22386.5.5.5h7c.2761.0.5-.22386.5-.5s-.2239-.5-.5-.5h-7zM0 10.5c0-.2761.223858-.5.5-.5h15c.2761.0.5.2239.5.5s-.2239.5-.5.5H.5c-.276142.0-.5-.2239-.5-.5zM.5 14c-.276142.0-.5.2239-.5.5s.223858.5.5.5h15c.2761.0.5-.2239.5-.5s-.2239-.5-.5-.5H.5z" fill-rule="evenodd" id="Union"></path></g></svg>
Build</a></div></li><li class="menu-mobile__item" data-path="menu-3"><div class="menu-mobile__item-content"></div></li><li class="menu-mobile__item" data-path="menu-4"><div class="menu-mobile__item-content"></div></li></ul><div class="docs-menu"><div class="docs-menu__content" id="sidebar"><nav class="docs-menu__links"><h3 class="docs-menu__links-title">Getting Started</h3><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../overview/index.html">What is Solvio?</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../overview/vector-search/index.html">Understanding Vector Search in Solvio</a></li></ul></nav></details><div class="docs-menu__links-group"><div class="docs-menu__links-group-heading"><a href="../../quickstart/index.html">Local Quickstart</a></div></div><div class="docs-menu__links-group"><div class="docs-menu__links-group-heading"><a href="../../interfaces/index.html">API &amp; SDKs</a></div></div><div class="docs-menu__links-group"><div class="docs-menu__links-group-heading"><a href="../../web-ui/index.html">Solvio Web UI</a></div></div><h3 class="docs-menu__links-title">User Manual</h3><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../concepts/index.html">Concepts</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../concepts/collections/index.html">Collections</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/points/index.html">Points</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/vectors/index.html">Vectors</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/payload/index.html">Payload</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/search/index.html">Search</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/explore/index.html">Explore</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/hybrid-queries/index.html">Hybrid Queries</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/filtering/index.html">Filtering</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/optimizer/index.html">Optimizer</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/storage/index.html">Storage</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/indexing/index.html">Indexing</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/snapshots/index.html">Snapshots</a></li></ul></nav></details><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../guides/installation/index.html">Guides</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../guides/installation/index.html">Installation</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/administration/index.html">Administration</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/running-with-gpu/index.html">Running with GPU</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/capacity-planning/index.html">Capacity Planning</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/optimize/index.html">Optimize Performance</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/multiple-partitions/index.html">Multitenancy</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/distributed_deployment/index.html">Distributed Deployment</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/quantization/index.html">Quantization</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/monitoring/index.html">Monitoring &amp; Telemetry</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/configuration/index.html">Configuration</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/security/index.html">Security</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/usage-statistics/index.html">Usage Statistics</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/common-errors/index.html">Troubleshooting</a></li></ul></nav></details><h3 class="docs-menu__links-title">Ecosystem</h3><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../fastembed/index.html">FastEmbed</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../fastembed/fastembed-quickstart/index.html">Quickstart</a></li><li class="docs-menu__links-submenu-item"><a href="../../fastembed/fastembed-semantic-search/index.html">FastEmbed &amp; Solvio</a></li><li class="docs-menu__links-submenu-item"><a href="../../fastembed/fastembed-splade/index.html">Working with SPLADE</a></li><li class="docs-menu__links-submenu-item"><a href="../../fastembed/fastembed-colbert/index.html">Working with ColBERT</a></li><li class="docs-menu__links-submenu-item"><a href="../../fastembed/fastembed-rerankers/index.html">Reranking with FastEmbed</a></li></ul></nav></details><h3 class="docs-menu__links-title">Tutorials</h3><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../beginner-tutorials/index.html">Vector Search Basics</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../beginner-tutorials/search-beginners/index.html">Semantic Search 101</a></li><li class="docs-menu__links-submenu-item"><a href="../../beginner-tutorials/neural-search/index.html">Build a Neural Search Service</a></li><li class="docs-menu__links-submenu-item"><a href="../../beginner-tutorials/hybrid-search-fastembed/index.html">Setup Hybrid Search with FastEmbed</a></li><li class="docs-menu__links-submenu-item"><a href="../../beginner-tutorials/retrieval-quality/index.html">Measure Search Quality</a></li></ul></nav></details><details class="docs-menu__links-group link-group active" open=""><summary class="docs-menu__links-group-heading"><a href="../index.html">Advanced Retrieval</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../reranking-hybrid-search/index.html">Reranking in Hybrid Search</a></li><li class="docs-menu__links-submenu-item"><a href="../code-search/index.html">Search Through Your Codebase</a></li><li class="docs-menu__links-submenu-item"><a href="../collaborative-filtering/index.html">Build a Recommendation System with Collaborative Filtering</a></li><li class="docs-menu__links-submenu-item active"><a href="index.html">Scaling PDF Retrieval with Solvio</a></li></ul></nav></details><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../database-tutorials/index.html">Using the Database</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../database-tutorials/bulk-upload/index.html">Bulk Upload Vectors</a></li><li class="docs-menu__links-submenu-item"><a href="../../database-tutorials/create-snapshot/index.html">Create &amp; Restore Snapshots</a></li><li class="docs-menu__links-submenu-item"><a href="../../database-tutorials/large-scale-search/index.html">Large Scale Search</a></li><li class="docs-menu__links-submenu-item"><a href="../../database-tutorials/huggingface-datasets/index.html">Load a HuggingFace Dataset</a></li><li class="docs-menu__links-submenu-item"><a href="../../database-tutorials/async-api/index.html">Build With Async API</a></li></ul></nav></details><h3 class="docs-menu__links-title">Support</h3><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../faq/solvio-fundamentals/index.html">FAQ</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../faq/solvio-fundamentals/index.html">Solvio Fundamentals</a></li><li class="docs-menu__links-submenu-item"><a href="../../faq/database-optimization/index.html">Database Optimization</a></li></ul></nav></details></nav></div></div></div></header><section class="docs documentation"><div class="documentation__container"><div class="d-flex flex-column flex-xl-row"><div class="docs-menu"><div class="docs-menu__content" id="sidebar"><nav class="docs-menu__links"><h3 class="docs-menu__links-title">Getting Started</h3><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../overview/index.html">What is Solvio?</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../overview/vector-search/index.html">Understanding Vector Search in Solvio</a></li></ul></nav></details><div class="docs-menu__links-group"><div class="docs-menu__links-group-heading"><a href="../../quickstart/index.html">Local Quickstart</a></div></div><div class="docs-menu__links-group"><div class="docs-menu__links-group-heading"><a href="../../interfaces/index.html">API &amp; SDKs</a></div></div><div class="docs-menu__links-group"><div class="docs-menu__links-group-heading"><a href="../../web-ui/index.html">Solvio Web UI</a></div></div><h3 class="docs-menu__links-title">User Manual</h3><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../concepts/index.html">Concepts</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../concepts/collections/index.html">Collections</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/points/index.html">Points</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/vectors/index.html">Vectors</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/payload/index.html">Payload</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/search/index.html">Search</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/explore/index.html">Explore</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/hybrid-queries/index.html">Hybrid Queries</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/filtering/index.html">Filtering</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/optimizer/index.html">Optimizer</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/storage/index.html">Storage</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/indexing/index.html">Indexing</a></li><li class="docs-menu__links-submenu-item"><a href="../../concepts/snapshots/index.html">Snapshots</a></li></ul></nav></details><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../guides/installation/index.html">Guides</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../guides/installation/index.html">Installation</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/administration/index.html">Administration</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/running-with-gpu/index.html">Running with GPU</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/capacity-planning/index.html">Capacity Planning</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/optimize/index.html">Optimize Performance</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/multiple-partitions/index.html">Multitenancy</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/distributed_deployment/index.html">Distributed Deployment</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/quantization/index.html">Quantization</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/monitoring/index.html">Monitoring &amp; Telemetry</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/configuration/index.html">Configuration</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/security/index.html">Security</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/usage-statistics/index.html">Usage Statistics</a></li><li class="docs-menu__links-submenu-item"><a href="../../guides/common-errors/index.html">Troubleshooting</a></li></ul></nav></details><h3 class="docs-menu__links-title">Ecosystem</h3><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../fastembed/index.html">FastEmbed</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../fastembed/fastembed-quickstart/index.html">Quickstart</a></li><li class="docs-menu__links-submenu-item"><a href="../../fastembed/fastembed-semantic-search/index.html">FastEmbed &amp; Solvio</a></li><li class="docs-menu__links-submenu-item"><a href="../../fastembed/fastembed-splade/index.html">Working with SPLADE</a></li><li class="docs-menu__links-submenu-item"><a href="../../fastembed/fastembed-colbert/index.html">Working with ColBERT</a></li><li class="docs-menu__links-submenu-item"><a href="../../fastembed/fastembed-rerankers/index.html">Reranking with FastEmbed</a></li></ul></nav></details><h3 class="docs-menu__links-title">Tutorials</h3><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../beginner-tutorials/index.html">Vector Search Basics</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../beginner-tutorials/search-beginners/index.html">Semantic Search 101</a></li><li class="docs-menu__links-submenu-item"><a href="../../beginner-tutorials/neural-search/index.html">Build a Neural Search Service</a></li><li class="docs-menu__links-submenu-item"><a href="../../beginner-tutorials/hybrid-search-fastembed/index.html">Setup Hybrid Search with FastEmbed</a></li><li class="docs-menu__links-submenu-item"><a href="../../beginner-tutorials/retrieval-quality/index.html">Measure Search Quality</a></li></ul></nav></details><details class="docs-menu__links-group link-group active" open=""><summary class="docs-menu__links-group-heading"><a href="../index.html">Advanced Retrieval</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../reranking-hybrid-search/index.html">Reranking in Hybrid Search</a></li><li class="docs-menu__links-submenu-item"><a href="../code-search/index.html">Search Through Your Codebase</a></li><li class="docs-menu__links-submenu-item"><a href="../collaborative-filtering/index.html">Build a Recommendation System with Collaborative Filtering</a></li><li class="docs-menu__links-submenu-item active"><a href="index.html">Scaling PDF Retrieval with Solvio</a></li></ul></nav></details><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../database-tutorials/index.html">Using the Database</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../database-tutorials/bulk-upload/index.html">Bulk Upload Vectors</a></li><li class="docs-menu__links-submenu-item"><a href="../../database-tutorials/create-snapshot/index.html">Create &amp; Restore Snapshots</a></li><li class="docs-menu__links-submenu-item"><a href="../../database-tutorials/large-scale-search/index.html">Large Scale Search</a></li><li class="docs-menu__links-submenu-item"><a href="../../database-tutorials/huggingface-datasets/index.html">Load a HuggingFace Dataset</a></li><li class="docs-menu__links-submenu-item"><a href="../../database-tutorials/async-api/index.html">Build With Async API</a></li></ul></nav></details><h3 class="docs-menu__links-title">Support</h3><details class="docs-menu__links-group link-group"><summary class="docs-menu__links-group-heading"><a href="../../faq/solvio-fundamentals/index.html">FAQ</a></summary><nav><ul class="docs-menu__links-submenu"><li class="docs-menu__links-submenu-item"><a href="../../faq/solvio-fundamentals/index.html">Solvio Fundamentals</a></li><li class="docs-menu__links-submenu-item"><a href="../../faq/database-optimization/index.html">Database Optimization</a></li></ul></nav></details></nav></div></div><div class="documentation__content"><div class="documentation__content-wrapper"><div class="documentation__article-wrapper"><ul class="docs-breadcrumbs"><li class="docs-breadcrumbs__crumb"><a href="../../index.html">Documentation</a></li><li class="docs-breadcrumbs__crumb-separator"></li><li class="docs-breadcrumbs__crumb"><a href="../index.html">Advanced tutorials</a></li><li class="docs-breadcrumbs__crumb-separator"></li><li class="docs-breadcrumbs__crumb">Scaling PDF Retrieval with Solvio</li></ul><article class="documentation-article"><h1 id="scaling-pdf-retrieval-with-solvio">Scaling PDF Retrieval with Solvio</h1><p><img alt="scaling-pdf-retrieval-solvio" src="../../tutorials/pdf-retrieval-at-scale/image1.png"/></p><div class="table-responsive"><table class="table mb-5"><thead><tr><th>Time: 30 min</th><th>Level: Intermediate</th><th>Output: <a href="https://github.com/solvio/examples/blob/master/pdf-retrieval-at-scale/ColPali_ColQwen2_Tutorial.ipynb" rel="noopener nofollow" target="_blank">GitHub</a></th><th><a href="https://githubtocolab.com/solvio/examples/blob/master/pdf-retrieval-at-scale/ColPali_ColQwen2_Tutorial.ipynb" rel="noopener nofollow" target="_blank"><img alt="Open In Colab" src="https://colab.research.google.com/assets/colab-badge.svg"/></a></th></tr></thead><tbody></tbody></table></div><p>Efficient PDF documents retrieval is a common requirement in tasks like <strong>(agentic) retrieval-augmented generation (RAG)</strong> and many other search-based applications. At the same time, setting up PDF documents retrieval is rarely possible without additional challenges.</p><p>Many traditional PDF retrieval solutions rely on <strong>optical character recognition (OCR)</strong> together with use case-specific heuristics to handle visually complex elements like tables, images and charts. These algorithms are often non-transferable ‚Äì even within the same domain ‚Äì with their task-customized parsing and chunking strategies, labor-intensive, prone to errors, and difficult to scale.</p><p>Recent advancements in <strong>Vision Large Language Models (VLLMs)</strong>, such as <a href="https://huggingface.co/blog/manu/colpali" rel="noopener nofollow" target="_blank"><strong>ColPali</strong></a> and its successor <a href="https://huggingface.co/vidore/colqwen2-v0.1" rel="noopener nofollow" target="_blank"><strong>ColQwen</strong></a>, started the transformation of the PDF retrieval. These multimodal models work directly with PDF pages as inputs, no pre-processing required. Anything that can be converted into an <strong>image</strong> (think of PDFs as screenshots of document pages) can be effectively processed by these models. Being far simpler in use, VLLMs achieve state-of-the-art performance in PDF retrieval benchmarks like the <a href="https://huggingface.co/spaces/vidore/vidore-leaderboard" rel="noopener nofollow" target="_blank">Visual Document Retrieval (ViDoRe) Benchmark</a>.</p><h2 id="how-vllms-work-for-pdf-retrieval">How VLLMs Work for PDF Retrieval</h2><p>VLLMs like <strong>ColPali</strong> and <strong>ColQwen</strong> generate <strong>multivector representations</strong> for each PDF page; the representations are stored and indexed in a vector database. During the retrieval process, models dynamically create multivector representations for (textual) user queries, and precise retrieval ‚Äì matching between PDF pages and queries ‚Äì is achieved through <a href="https://trysolvio.com/blog/solvio-colpali/#how-colpali-works-under-the-hood">late-interaction mechanism</a>.</p><aside role="status">Solvio supports <a href="../../concepts/vectors/index.html#multivectors">multivector representations</a>, making it well-suited for using embedding models such as ColPali, ColQwen, or <a href="../../fastembed/fastembed-colbert/index.html">ColBERT</a></aside><h2 id="challenges-of-scaling-vllms">Challenges of Scaling VLLMs</h2><p>The heavy multivector representations produced by VLLMs make PDF retrieval at scale computationally intensive. These models are inefficient for large-scale PDF retrieval tasks if used without optimization.</p><h3 id="math-behind-the-scaling">Math Behind the Scaling</h3><p><strong>ColPali</strong> generates over <strong>1,000 vectors per PDF page</strong>, while its successor, <strong>ColQwen</strong>, generates slightly fewer ‚Äî up to <strong>768 vectors</strong>, dynamically adjusted based on the image size. Typically, ColQwen produces <strong>~700 vectors per page</strong>.</p><p>To understand the impact, consider the construction of an <a href="https://trysolvio.com/articles/what-is-a-vector-database/#1-indexing-hnsw-index-and-sending-data-to-solvio"><strong>HNSW index</strong></a>, a common indexing algorithm for vector databases. Let‚Äôs roughly estimate the number of comparisons needed to insert a new PDF page into the index.</p><ul><li><strong>Vectors per page:</strong> ~700 (ColQwen) or ~1,000 (ColPali)</li><li><strong><a href="../../concepts/indexing/index.html#vector-index">ef_construct</a>:</strong> 100 (default)</li></ul><p>The lower bound estimation for the number of vector comparisions comparisons would be:</p><p>$$
700 \times 700 \times 100 = 49 \ \text{millions}
$$</p><p>Now imagine how much it will take to build an index on <strong>20,000 pages</strong>!</p><p>For ColPali, this number doubles. The result is <strong>extremely slow index construction time</strong>.</p><h3 id="our-solution">Our Solution</h3><p>We recommend reducing the number of vectors in a PDF page representation for the <strong>first-stage retrieval</strong>. After the first stage retrieval with a reduced amount of vectors, we propose to <strong>rerank</strong> retrieved subset with the original uncompressed representation.</p><aside role="status">You might consider using <b>quantization</b> (e.g., binary quantization) to reduce computational resources. However, as you can see above, quantization does not impact the parameters that determine the number of comparisons, so it will only affect memory consumption.</aside><p>The reduction of vectors can be achieved by applying a <strong>mean pooling operation</strong> to the multivector VLLM-generated outputs. Mean pooling averages the values across all vectors within a selected subgroup, condensing multiple vectors into a single representative vector. If done right, it allows the preservation of important information from the original page while significantly reducing the number of vectors.</p><p>VLLMs generate vectors corresponding to patches that represent different portions of a PDF page. These patches can be grouped in columns and rows of a PDF page.</p><p>For example:</p><ul><li>ColPali divides PDF page into <strong>1,024 patches</strong>.</li><li>Applying mean pooling by rows (or columns) of this patch matrix reduces the page representation to just <strong>32 vectors</strong>.</li></ul><p><img alt="ColPali patching of a PDF page" src="../../tutorials/pdf-retrieval-at-scale/pooling-by-rows.png"/></p><p>We tested this approach with the ColPali model, mean pooling its multivectors by PDF page rows. The results showed:</p><ul><li><strong>Indexing time faster by an order of magnitude</strong></li><li><strong>Retrieval quality comparable to the original model</strong></li></ul><p>For details of this experiment refer to our <a href="https://github.com/solvio/demo-colpali-optimized" rel="noopener nofollow" target="_blank">gitHub repository</a>, <a href="https://trysolvio.com/blog/colpali-solvio-optimization/">ColPali optimization blog post</a> or <a href="https://www.youtube.com/watch?v=_h6SN1WwnLs" rel="noopener nofollow" target="_blank">webinar ‚ÄúPDF Retrieval at Scale‚Äù</a></p><h2 id="goal-of-this-tutorial">Goal of This Tutorial</h2><p>In this tutorial, we will demonstrate a scalable approach to PDF retrieval using <strong>Solvio</strong> and <strong>ColPali</strong> &amp; <strong>ColQwen2</strong> VLLMs.
The presented approach is <strong>highly recommended</strong> to avoid the common pitfalls of long indexing times and slow retrieval speeds.</p><p>In the following sections, we will demonstrate an optimized retrieval algorithm born out of our successful experimentation:</p><p><strong>First-Stage Retrieval with Mean-Pooled Vectors:</strong></p><ul><li>Construct an HNSW index using <strong>only mean-pooled vectors</strong>.</li><li>Use them for the first-stage retrieval.</li></ul><p><strong>Reranking with Original Model Multivectors:</strong></p><ul><li>Use the original multivectors from ColPali or ColQwen2 <strong>to rerank</strong> the results retrieved in the first stage.</li></ul><h2 id="setup">Setup</h2><p>Install &amp; import required libraries</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># pip install colpali_engine&gt;=0.3.1</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">colpali_engine.models</span> <span class="kn">import</span> <span class="n">ColPali</span><span class="p">,</span> <span class="n">ColPaliProcessor</span>
</span></span><span class="line"><span class="cl"><span class="c1"># pip install solvio-client&gt;=1.12.0</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">solvio_client</span> <span class="kn">import</span> <span class="n">SolvioClient</span><span class="p">,</span> <span class="n">models</span>
</span></span></code></pre></div><p>To run these experiments, we‚Äôre using a <strong>Solvio cluster</strong>. If you‚Äôre just getting started, you can set up a <strong>free-tier cluster</strong> for testing and exploration. Follow the instructions in the documentation <a href="../../cloud/create-cluster/index.html#free-clusters">‚ÄúHow to Create a Free-Tier Solvio Cluster‚Äù</a></p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">client</span> <span class="o">=</span> <span class="n">SolvioClient</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">url</span><span class="o">=&lt;</span><span class="n">YOUR</span> <span class="n">CLUSTER</span> <span class="n">URL</span><span class="o">&gt;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">api_key</span><span class="o">=&lt;</span><span class="n">YOUR</span> <span class="n">API</span> <span class="n">KEY</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><p>Download <strong>ColPali</strong> model along with its input processors. Make sure to select the backend that suits your setup.</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">colpali_model</span> <span class="o">=</span> <span class="n">ColPali</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="s2">"vidore/colpali-v1.3"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">torch_dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">bfloat16</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">device_map</span><span class="o">=</span><span class="s2">"mps"</span><span class="p">,</span>  <span class="c1"># Use "cuda:0" for GPU, "cpu" for CPU, or "mps" for Apple Silicon</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span><span class="o">.</span><span class="n">eval</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">colpali_processor</span> <span class="o">=</span> <span class="n">ColPaliProcessor</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s2">"vidore/colpali-v1.3"</span><span class="p">)</span>
</span></span></code></pre></div><details><summary>For <b>ColQwen</b> model</summary><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">colpali_engine.models</span> <span class="kn">import</span> <span class="n">ColQwen2</span><span class="p">,</span> <span class="n">ColQwen2Processor</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">colqwen_model</span> <span class="o">=</span> <span class="n">ColQwen2</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="s2">"vidore/colqwen2-v0.1"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">torch_dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">bfloat16</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">device_map</span><span class="o">=</span><span class="s2">"mps"</span><span class="p">,</span> <span class="c1"># Use "cuda:0" for GPU, "cpu" for CPU, or "mps" for Apple Silicon</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span><span class="o">.</span><span class="n">eval</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">colqwen_processor</span> <span class="o">=</span> <span class="n">ColQwen2Processor</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s2">"vidore/colqwen2-v0.1"</span><span class="p">)</span>
</span></span></code></pre></div></details><h2 id="create-solvio-collections">Create Solvio Collections</h2><p>We can now create a collection in Solvio to store the multivector representations of PDF pages generated by <strong>ColPali</strong> or <strong>ColQwen</strong>.</p><p>Collection will include <strong>mean pooled</strong> by rows and columns representations of a PDF page, as well as the <strong>original</strong> multivector representation.</p><aside role="status">For the original multivectors generated by the models, we will disable HNSW index construction</aside><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">client</span><span class="o">.</span><span class="n">create_collection</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">collection_name</span><span class="o">=</span><span class="n">collection_name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">vectors_config</span><span class="o">=</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">"original"</span><span class="p">:</span> 
</span></span><span class="line"><span class="cl">            <span class="n">models</span><span class="o">.</span><span class="n">VectorParams</span><span class="p">(</span> <span class="c1">#switch off HNSW</span>
</span></span><span class="line"><span class="cl">                    <span class="n">size</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">distance</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">Distance</span><span class="o">.</span><span class="n">COSINE</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">multivector_config</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">MultiVectorConfig</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                        <span class="n">comparator</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">MultiVectorComparator</span><span class="o">.</span><span class="n">MAX_SIM</span>
</span></span><span class="line"><span class="cl">                    <span class="p">),</span>
</span></span><span class="line"><span class="cl">                    <span class="n">hnsw_config</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">HnswConfigDiff</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                        <span class="n">m</span><span class="o">=</span><span class="mi">0</span> <span class="c1">#switching off HNSW</span>
</span></span><span class="line"><span class="cl">                    <span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="s2">"mean_pooling_columns"</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">VectorParams</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">size</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">distance</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">Distance</span><span class="o">.</span><span class="n">COSINE</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">multivector_config</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">MultiVectorConfig</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="n">comparator</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">MultiVectorComparator</span><span class="o">.</span><span class="n">MAX_SIM</span>
</span></span><span class="line"><span class="cl">                <span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="s2">"mean_pooling_rows"</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">VectorParams</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">size</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">distance</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">Distance</span><span class="o">.</span><span class="n">COSINE</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">multivector_config</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">MultiVectorConfig</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="n">comparator</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">MultiVectorComparator</span><span class="o">.</span><span class="n">MAX_SIM</span>
</span></span><span class="line"><span class="cl">                <span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><h2 id="choose-a-dataset">Choose a dataset</h2><p>We‚Äôll use the <strong>UFO Dataset</strong> by Daniel van Strien for this tutorial. It‚Äôs available on Hugging Face; you can download it directly from there.</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">datasets</span> <span class="kn">import</span> <span class="n">load_dataset</span>
</span></span><span class="line"><span class="cl"><span class="n">ufo_dataset</span> <span class="o">=</span> <span class="s2">"davanstrien/ufo-ColPali"</span>
</span></span><span class="line"><span class="cl"><span class="n">dataset</span> <span class="o">=</span> <span class="n">load_dataset</span><span class="p">(</span><span class="n">ufo_dataset</span><span class="p">,</span> <span class="n">split</span><span class="o">=</span><span class="s2">"train"</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="embedding-and-mean-pooling">Embedding and Mean Pooling</h2><p>We‚Äôll use a function that generates multivector representations and their mean pooled versions of each PDF page (aka image) in batches.
For complete understanding, it‚Äôs important to consider the following specifics of <strong>ColPali</strong> and <strong>ColQwen</strong>:</p><p><strong>ColPali:</strong>
In theory, ColPali is designed to generate 1,024 vectors per PDF page, but in practice, it produces 1,030 vectors. This discrepancy is due to ColPali‚Äôs pre-processor, which appends the text <code>&lt;bos&gt;Describe the image.</code> to each input. This additional text generates an extra 6 multivectors.</p><p><strong>ColQwen:</strong>
ColQwen dynamically determines the number of patches in ‚Äúrows and columns‚Äù of a PDF page based on its size. Consequently, the number of multivectors can vary between inputs. ColQwen pre-processor prepends <code>&lt;|im_start|&gt;user&lt;|vision_start|&gt;</code> and appends <code>&lt;|vision_end|&gt;Describe the image.&lt;|im_end|&gt;&lt;|endoftext|&gt;</code>.</p><p>For example, that‚Äôs how ColQwen multivector output is formed.</p><p><img alt="that‚Äôs how ColQwen multivector output is formed" src="../../tutorials/pdf-retrieval-at-scale/ColQwen-preprocessing.png"/></p><p>The <code>get_patches</code> function is to get the number of <code>x_patches</code> (rows) and <code>y_patches</code> (columns) ColPali/ColQwen2 models will divide a PDF page into.
For ColPali, the numbers will always be 32 by 32; ColQwen will define them dynamically based on the PDF page size.</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">x_patches</span><span class="p">,</span> <span class="n">y_patches</span> <span class="o">=</span> <span class="n">model_processor</span><span class="o">.</span><span class="n">get_n_patches</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">image_size</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">patch_size</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">patch_size</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><details><summary>For <b>ColQwen</b> model</summary><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">model_processor</span><span class="o">.</span><span class="n">get_n_patches</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">image_size</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">patch_size</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">patch_size</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">spatial_merge_size</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">spatial_merge_size</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div></details><p>We choose to <strong>preserve prefix and postfix multivectors</strong>. Our <strong>pooling</strong> operation compresses the multivectors representing <strong>the image tokens</strong> based on the number of rows and columns determined by the model (static 32x32 for ColPali, dynamic XxY for ColQwen). Function retains and integrates the additional multivectors produced by the model back to pooled representations.</p><p>Simplified version of pooling for <strong>ColPali</strong> model:</p><p>(see the full version ‚Äì also applicable for <strong>ColQwen</strong> ‚Äì in the <a href="https://githubtocolab.com/solvio/examples/blob/master/pdf-retrieval-at-scale/ColPali_ColQwen2_Tutorial.ipynb" rel="noopener nofollow" target="_blank">tutorial notebook</a>)</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">processed_images</span> <span class="o">=</span> <span class="n">model_processor</span><span class="o">.</span><span class="n">process_images</span><span class="p">(</span><span class="n">image_batch</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="c1"># Image embeddings of shape (batch_size, 1030, 128)</span>
</span></span><span class="line"><span class="cl"><span class="n">image_embeddings</span> <span class="o">=</span> <span class="n">model</span><span class="p">(</span><span class="o">**</span><span class="n">processed_images</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># (1030, 128)</span>
</span></span><span class="line"><span class="cl"><span class="n">image_embedding</span> <span class="o">=</span> <span class="n">image_embeddings</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># take the first element of the batch</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Now we need to identify vectors that correspond to the image tokens</span>
</span></span><span class="line"><span class="cl"><span class="c1"># It can be done by selecting tokens corresponding to special `image_token_id`</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># (1030, ) - boolean mask (for the first element in the batch), True for image tokens </span>
</span></span><span class="line"><span class="cl"><span class="n">mask</span> <span class="o">=</span> <span class="n">processed_images</span><span class="o">.</span><span class="n">input_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">model_processor</span><span class="o">.</span><span class="n">image_token_id</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># For convenience, we now select only image tokens </span>
</span></span><span class="line"><span class="cl"><span class="c1">#   and reshape them to (x_patches, y_patches, dim)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># (x_patches, y_patches, 128)</span>
</span></span><span class="line"><span class="cl"><span class="n">image_patch_embeddings</span> <span class="o">=</span> <span class="n">image_embedding</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">x_patches</span><span class="p">,</span> <span class="n">y_patches</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">dim</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Now we can apply mean pooling by rows and columns</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># (x_patches, 128)</span>
</span></span><span class="line"><span class="cl"><span class="n">pooled_by_rows</span> <span class="o">=</span> <span class="n">image_patch_embeddings</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># (y_patches, 128)</span>
</span></span><span class="line"><span class="cl"><span class="n">pooled_by_columns</span> <span class="o">=</span> <span class="n">image_patch_embeddings</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># [Optionally] we can also concatenate special tokens to the pooled representations, </span>
</span></span><span class="line"><span class="cl"><span class="c1"># For ColPali, it's only postfix</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># (x_patches + 6, 128)</span>
</span></span><span class="line"><span class="cl"><span class="n">pooled_by_rows</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">cat</span><span class="p">([</span><span class="n">pooled_by_rows</span><span class="p">,</span> <span class="n">image_embedding</span><span class="p">[</span><span class="o">~</span><span class="n">mask</span><span class="p">]])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># (y_patches + 6, 128)</span>
</span></span><span class="line"><span class="cl"><span class="n">pooled_by_columns</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">cat</span><span class="p">([</span><span class="n">pooled_by_columns</span><span class="p">,</span> <span class="n">image_embedding</span><span class="p">[</span><span class="o">~</span><span class="n">mask</span><span class="p">]])</span>
</span></span></code></pre></div><h2 id="upload-to-solvio">Upload to Solvio</h2><p>The upload process is trivial; the only thing to pay attention to is the compute cost for ColPali and ColQwen2 models.
In low-resource environments, it‚Äôs recommended to use a smaller batch size for embedding and mean pooling.</p><p>Full version of the upload code is available in the <a href="https://githubtocolab.com/solvio/examples/blob/master/pdf-retrieval-at-scale/ColPali_ColQwen2_Tutorial.ipynb" rel="noopener nofollow" target="_blank">tutorial notebook</a></p><h2 id="querying-pdfs">Querying PDFs</h2><p>After indexing PDF documents, we can move on to querying them using our two-stage retrieval approach.</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">query</span> <span class="o">=</span> <span class="s2">"Lee Harvey Oswald's involvement in the JFK assassination"</span>
</span></span><span class="line"><span class="cl"><span class="n">processed_queries</span> <span class="o">=</span> <span class="n">model_processor</span><span class="o">.</span><span class="n">process_queries</span><span class="p">([</span><span class="n">query</span><span class="p">])</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Resulting query embedding is a tensor of shape (22, 128)</span>
</span></span><span class="line"><span class="cl"><span class="n">query_embedding</span> <span class="o">=</span> <span class="n">model</span><span class="p">(</span><span class="o">**</span><span class="n">processed_queries</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span></span></code></pre></div><p>Now let‚Äôs design a function for the two-stage retrieval with multivectors produced by VLLMs:</p><ul><li><strong>Step 1:</strong> Prefetch results using a compressed multivector representation &amp; HNSW index.</li><li><strong>Step 2:</strong> Re-rank the prefetched results using the original multivector representation.</li></ul><p>Let‚Äôs query our collections using combined mean pooled representations for the first stage of retrieval.</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># Final amount of results to return</span>
</span></span><span class="line"><span class="cl"><span class="n">search_limit</span> <span class="o">=</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Amount of results to prefetch for reranking</span>
</span></span><span class="line"><span class="cl"><span class="n">prefetch_limit</span> <span class="o">=</span> <span class="mi">100</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">query_points</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">collection_name</span><span class="o">=</span><span class="n">collection_name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">query</span><span class="o">=</span><span class="n">query_embedding</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">prefetch</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="n">models</span><span class="o">.</span><span class="n">Prefetch</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">query</span><span class="o">=</span><span class="n">query_embedding</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">limit</span><span class="o">=</span><span class="n">prefetch_limit</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">using</span><span class="o">=</span><span class="s2">"mean_pooling_columns"</span>
</span></span><span class="line"><span class="cl">        <span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="n">models</span><span class="o">.</span><span class="n">Prefetch</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">query</span><span class="o">=</span><span class="n">query_embedding</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">limit</span><span class="o">=</span><span class="n">prefetch_limit</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">using</span><span class="o">=</span><span class="s2">"mean_pooling_rows"</span>
</span></span><span class="line"><span class="cl">        <span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="n">limit</span><span class="o">=</span><span class="n">search_limit</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">with_payload</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">with_vector</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">using</span><span class="o">=</span><span class="s2">"original"</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><p>And check the top retrieved result to our query <em>‚ÄúLee Harvey Oswald‚Äôs involvement in the JFK assassination‚Äù</em>.</p><div class="highlight"><pre class="chroma" tabindex="0"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">dataset</span><span class="p">[</span><span class="n">response</span><span class="o">.</span><span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">payload</span><span class="p">[</span><span class="s1">'index'</span><span class="p">]][</span><span class="s1">'image'</span><span class="p">]</span>
</span></span></code></pre></div><p><img alt="Results, ColPali" src="../../tutorials/pdf-retrieval-at-scale/result-VLLMs.png"/></p><h2 id="conclusion">Conclusion</h2><p>In this tutorial, we demonstrated an optimized approach using <strong>Solvio for PDF retrieval at scale</strong> with VLLMs producing <strong>heavy multivector representations</strong> like <strong>ColPali</strong> and <strong>ColQwen2</strong>.</p><p>Without such optimization, the performance of retrieval systems can degrade severely, both in terms of indexing time and query latency, especially as the dataset size grows.</p><p>We <strong>strongly recommend</strong> implementing this approach in your workflows to ensure efficient and scalable PDF retrieval. Neglecting to optimize the retrieval process could result in unacceptably slow performance, hindering the usability of your system.</p><p>Start scaling your PDF retrieval today!</p></article><section class="docs-feedback d-print-none"><h5 class="docs-feedback__title">Was this page useful?</h5><div class="docs-feedback__buttons"><button class="button button_outlined button_sm docs-feedback__button" id="feedback__answer_yes">
<img alt="Thumb up icon" src="../../../icons/outline/thumb-up.svg"/>
Yes
</button>
<button class="button button_outlined button_sm docs-feedback__button" id="feedback__answer_no">
<img alt="Thumb down icon" src="../../../icons/outline/thumb-down.svg"/>
No</button></div></section><section class="docs-feedback__responses d-none"><p class="docs-feedback__response docs-feedback__response_yes" id="feedback__response_yes">Thank you for your feedback! üôè</p><p class="docs-feedback__response docs-feedback__response_no" id="feedback__response_no">We are sorry to hear that. üòî You can <a class="text-brand-p" href="https:/github.com/solvio/landing_page/tree/master/solvio-landing/content/documentation/advanced-tutorials/pdf-retrieval-at-scale.md" target="_blank">edit</a> this page on GitHub, or <a class="text-brand-p" href="https://github.com/solvio/landing_page/issues/new/choose" target="_blank">create</a> a GitHub issue.</p></section><script>const buttonsSection=document.querySelector(".docs-feedback"),responsesSection=document.querySelector(".docs-feedback__responses"),yesButton=document.querySelector("#feedback__answer_yes"),noButton=document.querySelector("#feedback__answer_no"),yesResponse=document.querySelector("#feedback__response_yes"),noResponse=document.querySelector("#feedback__response_no"),toggleResponses=()=>{buttonsSection.classList.add("d-none"),responsesSection.classList.remove("d-none")};yesButton.addEventListener("click",()=>{yesResponse.classList.add("feedback__response_visible"),toggleResponses()}),noButton.addEventListener("click",()=>{noResponse.classList.add("feedback__response_visible"),toggleResponses()})</script></div><div class="table-of-contents"><p class="table-of-contents__head">On this page:</p><nav id="TableOfContents"><ul><li><a href="index.html#scaling-pdf-retrieval-with-solvio">Scaling PDF Retrieval with Solvio</a><ul><li><a href="index.html#how-vllms-work-for-pdf-retrieval">How VLLMs Work for PDF Retrieval</a></li><li><a href="index.html#challenges-of-scaling-vllms">Challenges of Scaling VLLMs</a><ul><li><a href="index.html#math-behind-the-scaling">Math Behind the Scaling</a></li><li><a href="index.html#our-solution">Our Solution</a></li></ul></li><li><a href="index.html#goal-of-this-tutorial">Goal of This Tutorial</a></li><li><a href="index.html#setup">Setup</a></li><li><a href="index.html#create-solvio-collections">Create Solvio Collections</a></li><li><a href="index.html#choose-a-dataset">Choose a dataset</a></li><li><a href="index.html#embedding-and-mean-pooling">Embedding and Mean Pooling</a></li><li><a href="index.html#upload-to-solvio">Upload to Solvio</a></li><li><a href="index.html#querying-pdfs">Querying PDFs</a></li><li><a href="index.html#conclusion">Conclusion</a></li></ul></li></ul></nav></div><footer class="docs-footer w-100 py-0 pt-0 pb-4 pb-xl-0"><div class="docs-footer__bottom"><div class="docs-footer__bottom-content"><span>¬© 2025 Solvio.</span></div></div></footer></div></div></div></div></section></main></body><script async="" type="text/javascript">function OptanonWrapper(){const e=new CustomEvent("onetrust_loaded");document.dispatchEvent(e)}</script><script>!function(){const o="eQYi1nZE2zQSmnHuxjMRlDd2uLl65oHe";var n,s,t="analytics",e=window[t]=window[t]||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","screen","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware","register"],e.factory=function(n){return function(){if(window[t].initialized)return window[t][n].apply(window[t],arguments);var o,s=Array.prototype.slice.call(arguments);return["track","screen","alias","group","page","identify"].indexOf(n)>-1&&(o=document.querySelector("link[rel='canonical']"),s.push({__t:"bpc",c:o&&o.getAttribute("href")||void 0,p:location.pathname,u:location.href,s:location.search,t:document.title,r:document.referrer})),s.unshift(n),e.push(s),e}};for(n=0;n<e.methods.length;n++)s=e.methods[n],e[s]=e.factory(s);e.load=function(n,s){var i,o=document.createElement("script");o.type="text/javascript",o.async=!0,o.setAttribute("data-global-segment-analytics-key",t),o.src="https://evs.analytics.solvio.tech/5caWuitPgcGFN5Q7HMpTaj/vEkmzjuRSqeXGbhGAFTWex.min.js",i=document.getElementsByTagName("script")[0],i.parentNode.insertBefore(o,i),e._loadOptions=s},e._writeKey=o,e._cdn="https://evs.analytics.solvio.tech",e.SNIPPET_VERSION="5.2.0",e.load(o)}}()</script><script src="../../../js/google-setup.min.14728a3ae9bd931593645b6ddbfe801d400cd2970006e782cb67f3966654248ca962dbaf4cf371493a2d326861b3a691a99d6d8349c8b2752339ab91d3787069.js"></script><script src="../../../js/index.min.e37feda1952d752f5568e1ebc55e183629e4d361f4df09edeed70b4a4327d601161c4147bdbe4149b4a3cdc1ed43f1bf1a2f2340a421f1aa821103980dfe0bda.js"></script><script src="../../../js/search/search.min.328025828a7fa9c307213f15802ebd03c13ee7ed57de2f78c6afa8f4559c91029ddc3ff057e542aeff95f130e0a5d07867b9a83183de7ac0fa73c1ceb18d6e0d.js" type="module"></script><script src="../../../js/search/scroll.min.1d7f8fa4537bd0d17128ff206e3895d438bb6f14f60db3f4fbb3d47922ad458da372a2c793e6ce2442b65559423423d7fdc84617b1ed80893a151065ae408e37.js"></script><script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script><script src="../../../js/copy-code.min.95b03a45b2ab4b7a608ecfd4b5919c8572a5b2cd1463f52561cd10976abf3b74334f91324c0e620cb80afac46026a0b18cce6fb753d8495f74c6d478c8ca1d03.js"></script><script src="../../../js/lang-switcher.min.63da11cef09772078425b1ee56415b9c37842a9399f2ba2d2f5efbf72fb751686c410bd50e9bcd283c8231cb97c1973199d4923beef29d8b06e59d9983a6ba51.js"></script><script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script src="../../../js/vendor/anchor.min.0e138e17ebcf1c1147a7a3a81d9ac3c601622eedc479f1636470eb2552470f4e27c9a8efe6e8378995dedc1ab67029d8989536ea76f0857d45d1615ae772b8a1.js"></script><script>document.addEventListener("keydown",function(e){if((e.metaKey||e.ctrlKey)&&e.key==="k"){e.preventDefault();let t=document.querySelector('[data-target="#searchModal"]');t&&t?.click()}})</script><script>window.addEventListener("message",e=>{if(e.data.type==="hsFormCallback"&&e.data.eventName==="onFormReady"){const t=document.querySelector(`form[data-form-id="${e.data.id}"]`);if(t){const e=t.querySelector('[name="last_form_fill_url"]');e&&(e.value=window.location.href);const n=t.querySelector('[name="referrer_url"]');n&&(n.value=document.referrer)}}})</script></html>